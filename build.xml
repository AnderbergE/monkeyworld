<project name="MonkeyWorld" default="compile">

    <property name="lib" value="lib" />
	
	<!--
	windows: netsh advfirewall set global StatefulFTP disable
	--><!--
	<target name="upload" depends="compile">
 		<ftp server="ftp.torsasok.se"
 			port="21"
			remotedir="/admin.torsasok.se/public_html/e/deploy"
			userid="torsasok.se"
			password="oringen2004"
 			verbose="yes"
 			passive="yes"
 			binary="yes"
			depends="yes">
			<fileset dir="./js" />
			<fileset dir="./src">
				<include name="index.html" />
				<include name="style.css" />
			</fileset>
		</ftp>
	</target>
	
	<target name="upload_lib">
 		<ftp server="ftp.torsasok.se"
 			port="21"
			remotedir="/admin.torsasok.se/public_html/e/lib"
			userid="torsasok.se"
			password="oringen2004"
 			verbose="yes"
 			passive="yes"
 			binary="yes"
			depends="yes">
			<fileset dir="./lib" />
		</ftp>
	</target>
	
	<target name="upload_res">
	 	<ftp server="ftp.torsasok.se"
 			port="21"
			remotedir="/admin.torsasok.se/public_html/e/res"
			userid="torsasok.se"
			password="oringen2004"
 			verbose="yes"
 			passive="yes"
 			binary="yes"
			depends="yes">
			<fileset dir="./res" />
		</ftp>
	</target>
-->
  <taskdef name="jscomp" classname="com.google.javascript.jscomp.ant.CompileTask"
           classpath="lib/closure/compiler.jar"/>
	<target name="compile">
		
		<jscomp compilationLevel="advanced"  
		            debug="true" output="html/monkeyworld.js" warning="verbose">

			<externs dir=".">
				<file name="jquery-1.3.2.externs.js"/>
				<file name="externs.js"/>
			</externs>
		      <sources dir="src">
		      	<file name="Utils.js"/>
		      	<file name="GlobalObject.js" />
		      	<file name="kineticjs/Plugins.js" />
		      	<file name="Settings.js"/>
		      	<file name="res/Strings.js"/>
		        <file name="res/Sounds.js"/>
		      	<file name="res/Images.js"/>
		      	<file name="GameState.js"/>
		      	<file name="Player.js"/>
		      	<file name="Module.js"/>
		        <file name="GameModule.js"/>
		        <file name="strategies/MonkeyStrategy.js"/>
		        <file name="strategies/AngelStrategy.js"/>
		        <file name="strategies/GamerStrategy.js"/>
		        <file name="ViewModule.js"/>
		      	<file name="model/MonkeyWorld.js"/>
		      	<file name="model/ReadyToTeach.js"/>
		      	<file name="model/AgentChooser.js"/>
		      	<file name="model/FishingGame/Fish.js"/>
		      	<file name="model/FishingGame/FishingGame.js"/>
		      	<file name="model/Ladder/Ladder.js"/>
		      	<file name="EventManager.js"/>
		      	<file name="ModelModule.js"/>
		      	<file name="view/AgentView.js"/>
		      	<file name="view/MonkeyWorldView.js"/>
		      	<file name="view/ReadyToTeachView.js"/>
		      	<file name="view/AgentChooserView.js"/>
		      	<file name="view/FishingGame/FishingGameView.js"/>
		      	<file name="view/FishingGame/FishingGameCountingView.js"/>
		      	<file name="view/Ladder/LadderView.js"/>
		      	<file name="GameView.js"/>
			    <file name="MonkeyWorld.js"/>
		      </sources>
		    </jscomp>
		
			<copy todir="html" file="src/html/index.html" />
			<copy todir="html" file="src/html/style.css" />
	</target>

</project>
