var i=void 0,k=!0,l=null,m=!1;function q(){return function(){}}function s(a){return function(){return this[a]}}function t(a){return function(){return a}}var A;Kinetic.s={};var ca=new function(){var a={},b=[],e=0;this.Db=t("GameEventManager");this.on=function(b,c,e){for(var b=b.split(" "),h=0;h<b.length;h++)b[h]in a||(a[b[h]]=[]),a[b[h]].push(c),c.B=e};this.off=function(b,c){for(var e=0;e<a[b].length;e++)a[b][e].B===c&&a[b].splice(e,1);0==a[b].length&&delete a[b]};this.print=function(){console.log("-------EVENT MANAGER STATE-----------------");for(var b in a){console.log("key: "+b);for(var c=0;c<a[b].length;c++)console.log("   "+a[b][c].B)}console.log("-------------------------------------------")};
this.bf=function(b){if(b in a)for(var c=0;c<a[b].length;c++)console.log(a[b][c].B+" listens to "+b)};this.L=function(b){var c=0,e;for(e in a){for(var h=a[e].length,f=0;f<h;f++)a[e][f].B===b&&(a[e].splice(f,1),f--,h--,c++);0==a[e].length&&delete a[e]}};this.a=function(d,c,g){e++;d=a[d];if(d!=i)for(var h=0;h<d.length;h++){var f=d[h];g!=i&&g&&console.log("  Observer: "+d[h].B);f(c)}e--;if(0==e&&0<b.length){for(h=0;h<b.length;h++)this.L(b[h]);b=[]}};this.xb=function(b,c,g,h){e++;g=a[g];if(g!=i)for(var f=
0;f<g.length;f++){var p=g[f];console.log("  Observer: "+g[f].B);p(b,h);c||b()}e--};this.l=function(a,b,e){this.xb(b,k,a,e)}};var da="MG_LADDER_PLACE_TARGET",ea="MG_LADDER_ALLOW_INTERRUPT",fa="MG_LADDER_READY_TO_PICK",ga="MG_LADDER_CHEER",B="MG_LADDER_ACKNOWLEDGE_INPUT",C="MG_LADDER_ALLOW_GAMER_INPUT";var ha=Class.extend({init:function(a){this.e=a;this.m=ca},on:function(a,b,e){this.m.on(a,b,e===i?this.e:e)},off:function(a,b){this.m.off(a,b===i?this.e:b)},L:function(a){this.m.L(a===i?this.e:a)},a:function(a,b,e){e!=i&&e&&console.log(this.e+": "+a);this.m.a(a,b,e)},l:function(a,b,e){console.log(this.e+": "+a);this.m.l(a,b,e)},tb:function(a,b,e){var d=this;return function(c){console.log(d.e+": "+b);d.m.xb(c,a,b,e)}},sb:function(a,b){return this.tb(m,a,b)},R:function(a,b){return this.tb(k,a,b)},Db:function(){console.log(this.m.Db())},
wb:function(a){this.e=a},We:function(a){this.m=a},Me:s("e")});function ia(){var a=[];this.ob=function(b){a.push(b)};this.X=function(b){var e=b-1;if(0>e||e>=a.length)throw"MonkeyWorld.NoSuchRoundException ("+b+")";return a[e]}}function ja(){var a=m,b=[];this.Fa=function(){console.log("Mistake reported");a=k};this.mb=function(){return a};this.Zc=function(a){b.push(a)};this.Da=function(){b.splice(b.length-1)};this.Fc=function(){return b}}
function ka(){this.ob=function(){throw"MonkeyWorld.NoMiniGameResultException";};this.X=function(){throw"MonkeyWorld.NoMiniGameResultException";}};function la(){var a=[];this.setTimeout=function(b,e){var d=setTimeout(b,e);a.push(d);return d};this.setInterval=function(b,e){var d=setInterval(b,e);a.push(d);return d};this.clearTimeout=function(b){a.remove(b);clearTimeout(b)};this.clearInterval=function(b){a.remove(b);clearInterval(b)};this.Ja=function(){for(var b=0;b<a.length;b++)clearTimeout(a[b]);delete a;a=[]}}
var oa=ha.extend({init:function(a){this._super(a);this.J=new la;this.F=[];this.D=[]},G:function(a){this.F.push(a)},k:function(){if(this.F===l)throw{name:"MW.TearDownAlreadyCalledException",message:"This module ("+this.e+") has already been teared down."};this.J.Ja();this.L();for(var a=0;a<this.F.length;a++)this.F[a](),this.F[a]=l;this.F=l},z:function(a){this.D.push(a)},o:function(){if(this.D===l)throw{name:"MW.SetupAlreadyCalledException",message:"This module ("+this.e+") has already been setted up."};
for(var a=0;a<this.D.length;a++)this.D[a](),this.D[a]=l;this.D=l},setTimeout:function(a,b){return this.J.setTimeout(a,b)},setInterval:function(a,b){return this.J.setInterval(a,b)},clearTimeout:function(a){this.J.clearTimeout(a)},clearInterval:function(a){this.J.clearInterval(a)}});Object.size=function(a){var b=0,e;for(e in a)a.hasOwnProperty(e)&&b++;return b};
var pa=new function(){function a(a,e,d,c){var g=console;d===i?d="":"string"!==typeof d&&(d="");if("evm"!=d&&"sound"!=d){for(var d=d.substr(0,8),d=d.toUpperCase(),h=8-d.length,f=0;f<h;f++)d=" "+d;c.call(g,a+" "+d+" "+e)}}this.debug=function(b,e){a("DEBUG  ",b,e,console.debug)};this.af=function(b,e){a("WARNING",b,e,console.warn)};this.Vc=function(b){a("NOTIFY ",b,"sound",console.info)};this.error=function(b,e){a("ERROR  ",b,e,console.error)}};
Array.prototype.remove=function(a){for(var b=0;b<this.length;b++)this[b]===a&&this.splice(b)};
var E=new function(){function a(a,e,d,c,g){var h=0,f=0;this.next=function(){var p=a+h*d,n=e+f*c;h=(h+1)%g;0==h&&f++;return{x:p,y:n}}}this.Ne=function(a){return!isNaN(a-0)};this.ta=function(a){var e=arguments;return function(a){var b,g=[],h=l,f=k;for(b=0;b<e.length;b+=1)g.push(e[b]);h=function(b){f&&(b=a,f=m);var c=g.shift();c!=i&&c(h,b)};h()}};this.we=function(a,e,d,c,g){var h=new function(){var a,b;a===i&&(a=0);b===i&&(b=0);return{x:a,y:b}};h.x=e.x*a*a*a+d.x*3*a*a*(1-a)+c.x*3*a*(1-a)*(1-a)+g.x*(1-
a)*(1-a)*(1-a);h.y=e.y*a*a*a+d.y*3*a*a*(1-a)+c.y*3*a*(1-a)*(1-a)+g.y*(1-a)*(1-a)*(1-a);return h};this.Te=function(a,e){a.x!=i&&(a.x*=e);a.y!=i&&(a.y*=e);a.width!=i&&(a.width*=e);a.height!=i&&(a.height*=e);a.fontSize!=i&&(a.fontSize*=e);if(a.scale!=i&&(a.scale.x!=i&&(a.scale.x*=e),a.scale.y!=i))a.scale.y*=e;return a};this.q=function(a,e){return Math.floor(Math.random()*(e-a+1))+a};this.za=function(a,e){for(var d=0;d<a.length;d++)if(a[d]===e)return k;return m};this.Z=function(b,e,d,c,g){return new a(b,
e,d,c,g)};this.ye=function(a,e,d,c,g,h){5==arguments.length&&(h=m);for(var f=Array(d),p=Array(g),n=0;n<g;n++){for(var j=this.q(0,d-1);this.za(p,j);)j=this.q(0,d-1);p.push(j)}for(n=0;n<d;n++)if(this.za(p,n))f[n]=c;else if(f[n]=this.q(a,e),h)for(;f[n]==c;)f[n]=this.q(a,e);return f}};Kinetic.nd=function(a){var b=new Kinetic.Group({x:a.x,y:a.y,width:a.width,height:a.height}),e=new Kinetic.Rect({x:0,y:0,width:a.width,height:a.height,fill:"#ccc",strokeWidth:1,stroke:"white"}),d=new Kinetic.Text({text:a.text,fontFamily:"Arial",textFill:"black",fontSize:a.fontSize,x:a.width/2,y:a.height/2,verticalAlign:"middle",align:"center"});b.add(e);b.add(d);b.on("mousedown touchstart",a.callback);return b};var qa={Ib:"balloons.png",Jb:"yesno/no-sprite.png",Lb:"yesno/yes-sprite.png",Vb:"Jungle_Bkg.png",Tb:"bg-garden.png",Ub:"bg-sadgarden.png",S:"minigames/treegame/background.png",ec:"minigames/treegame/treedots.png",T:"minigames/treegame/lizard_cover.png",cc:"minigames/treegame/lizard/lizard-sprite.png",dc:"minigames/treegame/lizard/tongue-sprite.png",Xb:"minigames/treegame/nrpad.png",Zb:"minigames/treegame/paket-1.png",$b:"minigames/treegame/paket-2.png",ac:"minigames/treegame/paket-3.png",ka:"buttons/wood.png",
Kb:"buttons/wood-selected.png",Nb:"numbers/dots/prick-1.png",Ob:"numbers/dots/prick-2.png",Pb:"numbers/dots/prick-3.png",Qb:"numbers/dots/prick-4.png",Rb:"numbers/dots/prick-5.png",Sb:"numbers/dots/prick-6.png",U:"vattendroppe.png",p:"vattenkanna.png",ma:"vattenkanna-botten.png",Hb:"agents/mouse/body-sprite.png",Fb:"agents/mouse/facials-sprite.png",Eb:"agents/mouse/blink-sprite.png",Gb:"agents/mouse/pointat-sprite.png"},G={},M={},ra=0,sa=0,ta;for(ta in G)ra++;M.Kc=function(){return sa};
M.Tc=function(a){var b=0,e=Object.size(qa),d;for(d in qa){var c=qa[d];G[d]=new Image;G[d].onload=function(){++b>=e&&a();sa=b/ra};G[d].src="../res/img/"+c}};var N,ua={INIT_LOADING_SOUNDS:{sv:"Laddar ner ljud...",en:"Downloading sounds..."},INIT_LOADING_IMAGES:{sv:"Laddar ner bilder...",en:"Downloading images..."},RESTART:{sv:"Starta om",en:"Restart"},SETTINGS:{sv:"Inst\u00e4llningar",en:"Settings"},YAY:{sv:"Hurra!",en:"Yay!"},INTRO_1:{sv:"Hej! De h\u00e4r v\u00e4nnerna beh\u00f6ver din hj\u00e4lp",en:"Hello! These friends need your help"},INTRO_2:{sv:"med att f\u00e5 deras tr\u00e4dg\u00e5rd att v\u00e4xa.",en:"to make their garden grow."},INTRO_3:{sv:"Om du kan l\u00e4ra din v\u00e4n hur man spelar spelen",
en:"If you can teach your friend how to do the games"},INTRO_4:{sv:"kan han eller hon samla vattendroppar -",en:"he or she can collect water drops -"},INTRO_5:{sv:"- f\u00f6r att f\u00e5 deras tr\u00e4dg\u00e5rd att v\u00e4xa -",en:"- to make their garden grow again -"},INTRO_GARDEN_1:{sv:"- fr\u00e5n det h\u00e4r...",en:"- from this..."},INTRO_GARDEN_2:{sv:"...till det h\u00e4r!",en:"...to this!"},CHOOSE_YOUR_FRIEND:{sv:"B\u00f6rja med att v\u00e4lja vilken v\u00e4n du vill hj\u00e4lpa!",en:"First, choose the friend you would like to teach!"},
THANKS_FOR_CHOOSING_ME:{sv:"Ja! Tack f\u00f6r att du valde mig!",en:"Yay! Thanks for choosing me!"},ARE_YOU_READY_TO_TEACH:{sv:"\u00c4r du redo att l\u00e4ra apan?",en:"Are you ready to teach monkey?"},SYSTEM_FIRST_YOU_PLAY:{sv:"F\u00f6rst \u00e4r det du som spelar spelet!",en:"First, you play the game!"},SYSTEM_WELL_DONE:{sv:"Bra gjort!",en:"Well done!"},SYSTEM_TIME_TO_TEACH_FRIEND:{sv:"Nu \u00e4r det dags att l\u00e4ra din v\u00e4n hur man g\u00f6r!",en:"Now it's time to teach your friend!"},NO_MY_TURN:{sv:"Gl\u00f6m inte att det \u00e4r MIN tur nu!",
en:"Remember it\u2019s MY turn now!"},BUT_YOU_CAN_INTERRUPT:{sv:"Men du kan avbryta mig om jag g\u00f6r fel.",en:"But you can interrupt me if I'm making a mistake."},AGENT_BUCKET_IS_FULL:{sv:"Hurra! Nu \u00e4r min kanna full och vi kan bes\u00f6ka min tr\u00e4dg\u00e5rd!",en:"Wow! Now my bucket is full and we are ready to visit my garden!"},AGENT_NEED_MORE_WATER:{sv:"Jag beh\u00f6ver mer vatten till tr\u00e4dg\u00e5rden!",en:"I still need more water to fix my garden!"},AGENT_LETS_KEEP_PLAYING:{sv:"Vi forts\u00e4tter spela.",
en:"Let\u2019s keep playing."},MAYBE_THAT_WORKS:{sv:"Okej, vi testar och ser om det \u00e4r r\u00e4tt.",en:"OK, let's see if this works."},YAY_HELPED_ME_GET_WATER_DROP_1:{sv:"Hurra! Du hj\u00e4lpte mig att f\u00e5 en vattendroppe",en:"Yay! You helped me get a water drop"},YAY_HELPED_ME_GET_WATER_DROP_2:{sv:"till min tr\u00e4dg\u00e5rd, s\u00e5 den kan v\u00e4xa!",en:"for my garden to grow again!"},YAY_HELPED_ME_GET_WATER:{sv:"Hurra! Tack f\u00f6r hj\u00e4lpen! Nu fick jag lite vatten till min tr\u00e4dg\u00e5rd!",
en:"Woo! Thank you for helping me! Now I have some water for my garden!"},LETS_FILL_THE_BUCKET:{sv:"Kom igen och fyll kannan!",en:"Let's fill the bucket!"},WHICH_ONE_DO_YOU_THINK_IT_IS:{sv:"Vilken tror du att det \u00e4r?",en:"Which one do you think it is?"},YES_I_THINK_THAT_ONE_IS_BETTER:{sv:"Ja, det d\u00e4r fungerar nog b\u00e4ttre!",en:"Yes, I think that one is better!"},LADDER_TREE_BETTER_BECAUSE_BIGGER:{sv:"Ja, det verkar vara ett bra val, eftersom den \u00c4R st\u00f6rre!",en:"Yes, that seems to be a good choice because it IS bigger!"},
LADDER_TREE_BETTER_BECAUSE_SMALLER:{sv:"Ja, det verkar vara ett bra val, eftersom den \u00c4R mindre!",en:"Yes, that seems to be a good choice because it IS smaller!"},IM_GOING_TO_PICK_THIS_ONE:{sv:"Okej, f\u00e5r se om den h\u00e4r fungerar. Hmm...",en:"Ok, let's see if this works. Hmm..."},LADDER_LOOKS_FUN:{sv:"Det d\u00e4r s\u00e5g kul ut!",en:"That looked fun!"},LADDER_SHOW_ME:{sv:"Visa mig hur man g\u00f6r!",en:"Now show me how to do it!"},LADDER_MY_TURN:{sv:"Okej, nu ska vi se om jag klarar det h\u00e4r sj\u00e4lv!",
en:"Ok, now let's see if I can do this on my own!"},LADDER_IS_IT_RIGHT:{sv:"G\u00f6r jag r\u00e4tt eller fel?",en:"Am I doing it right or wrong?"},LADDER_IT_WAS_RIGHT:{sv:"Ja! Du fick presenten!",en:"Yeah! You got it!"},LADDER_TREE_OOPS_TOO_HIGH:{sv:"Oj, kanske tog vi i f\u00f6r mycket!",en:"Oops! Maybe we overdid it!"},LADDER_TREE_OOPS_TOO_LOW:{sv:"Hmm... Kanske var det inte tillr\u00e4ckligt!",en:"Hmm... Maybe it wasn't enough!"},LADDER_TREE_TRY_A_SMALLER_NUMBER:{sv:"Vi kan v\u00e4l testa en mindre och se vad som h\u00e4nder!",
en:"Let's try a smaller one and see what happens!"},LADDER_TREE_TRY_A_BIGGER_NUMBER:{sv:"Vad tror du? Ska vi testa en st\u00f6rre?",en:"What do you think? Shall we try a bigger one?"},LADDER_TREE_AGENT_PLAY_TOO_LOW:{sv:"Hmm, det gick inte. Jag undrar varf\u00f6r. Jag testar en st\u00f6rre!",en:"Hmm, that didn't work. I wonder why. Let me try a bigger one!"},LADDER_TREE_AGENT_PLAY_TOO_HIGH:{sv:"\u00c5h, nej! Var den f\u00f6r stor?",en:"Oh no! Was that too big?"},LADDER_TREE_AGENT_SEE_CORRECT:{sv:"WOO! Tack f\u00f6r hj\u00e4lpen! Vilken fin present!",
en:"WOO! Thank you for helping me! What a great surprise!"},LADDER_TREE_AGENT_SUGGEST_SOLUTION_1:{sv:"Kanske kan vi f\u00f6rs\u00f6ka med samma siffra p\u00e5",en:"Maybe we should match the number on"},LADDER_TREE_AGENT_SUGGEST_SOLUTION_2:{sv:"nummerplattan som vid presenten?",en:"the number pad to the number by the gift?"},LADDER_PLEASE_HELP_ME:{sv:"Kan du hj\u00e4lpa mig att v\u00e4lja r\u00e4tt?",en:"Can you please help me find the right one?"},LADDER_MOUNTAIN_IM_DOWN_HERE:{sv:"Jag \u00e4r h\u00e4r nere!",
en:"I'm down here!"},LADDER_MOUNTAIN_IM_UP_HERE:{sv:"Jag \u00e4r h\u00e4r uppe!",en:"I'm up here!"},LADDER_MOUNTAIN_YOU_SAVED_ME:{sv:"Du r\u00e4ddade mig!!!",en:"You saved me!!!"},LADDER_MOUNTAIN_IM_HUNGRY:{sv:"Jag \u00e4r hungrig. Kom s\u00e5 g\u00e5r vi och \u00e4ter!",en:"I'm hungry. Let's go eat!"},LADDER_MOUNTAIN_TRY_FEWER_BALLOONS:{sv:"Kanske ska vi testa med f\u00e4rre ballonger?",en:"Perhaps we should try with fewer balloons?"},LADDER_MOUNTAIN_TRY_MORE_BALLOONS:{sv:"Vi kan v\u00e4l testa med fler ballonger och se vad som h\u00e4nder?",
en:"Let's try with more balloons and see what happens!"},LADDER_MOUNTAIN_AGENT_SUGGEST_SOLUTION_1:{sv:"Kanske kan vi f\u00f6rs\u00f6ka med lika m\u00e5nga ballonger",en:"Maybe we should match the number of balloons"},LADDER_MOUNTAIN_AGENT_SUGGEST_SOLUTION_2:{sv:"som niv\u00e5er upp din v\u00e4n \u00e4r.",en:"to the level your friend is stuck on."},LADDER_MOUNTAIN_AGENT_PLAY_TOO_LOW:{sv:"Oj, det kanske var f\u00f6r f\u00e5 ballonger.",en:"Oops, maybe I used to few balloons."},LADDER_MOUNTAIN_AGENT_PLAY_TOO_HIGH:{sv:"Hoppsan, det var nog f\u00f6r m\u00e5nga ballonger!",
en:"Oops, I think there were too many balloons!"},LADDER_MOUNTAIN_BETTER_BECAUSE_BIGGER:{sv:"Ja, det fungerar nog, f\u00f6r det \u00c4R fler ballonger!",en:"Yes, this can work, beacuse that IS more ballons!"},LADDER_MOUNTAIN_BETTER_BECAUSE_SMALLER:{sv:"Ja, det fungerar nog, f\u00f6r det \u00c4R f\u00e4rre ballonger!",en:"Yes, this will probably work, beacuse that IS fewer balloons!"},LADDER_MOUNTAIN_AGENT_SEE_CORRECT:{sv:"WOO! Tack f\u00f6r hj\u00e4lpen! Vi r\u00e4ddade v\u00e5r v\u00e4n!",en:"WOO! Thank you for helping me! We saved our friend!"},
NUMBER_1:{sv:"nummer 1",en:"number 1"},NUMBER_2:{sv:"nummer 2",en:"number 2"},NUMBER_3:{sv:"nummer 3",en:"number 3"},NUMBER_4:{sv:"nummer 4",en:"number 4"},NUMBER_5:{sv:"nummer 5",en:"number 5"},NUMBER_6:{sv:"nummer 6",en:"number 6"},NUMBER_7:{sv:"nummer 7",en:"number 7"},NUMBER_8:{sv:"nummer 8",en:"number 8"},NUMBER_9:{sv:"nummer 9",en:"number 9"},NUMBER_10:{sv:"nummer 10",en:"number 10"}};
N={get:function(a,b){if(ua[a]===i)return l;for(var e=ua[a].en,d=1;d<arguments.length;d++)e=e.replace("%"+d,arguments[d]);return e}};function O(a,b,e){this.ia=a;this.vb=b;this.Wa=b!=l;this.lb=e;this.Le=s("vb");this.$e=s("Wa")}
var va=new O("19446__totya__yeah","YAY"),wa=new O("27882__stickinthemud__bike-horn-double-toot",l),xa=new O("60443__jobro__tada1",l),ya=new O("406__tictacshutup__click-1-d",l,4),za=new O(l,"NO_MY_TURN"),Aa=new O(l,"CHOOSE_YOUR_FRIEND"),Ba=new O(l,"THANKS_FOR_CHOOSING_ME"),Ca=new O(l,"BUT_YOU_CAN_INTERRUPT"),Da=new O(l,"IM_GOING_TO_PICK_THIS_ONE"),Ea=new O(l,"MAYBE_THAT_WORKS"),Fa=new O(l,"YAY_HELPED_ME_GET_WATER_DROP_1"),Ga=new O(l,"YAY_HELPED_ME_GET_WATER_DROP_2"),Ha=new O(l,"YAY_HELPED_ME_GET_WATER"),
Ia=new O(l,"LETS_FILL_THE_BUCKET"),Ja=new O(l,"WHICH_ONE_DO_YOU_THINK_IT_IS"),Ka=new O("25879__acclivity__drip1",l),La=new O(l,"INTRO_1"),Ma=new O(l,"INTRO_2"),Na=new O(l,"INTRO_3"),Oa=new O(l,"INTRO_4"),Pa=new O(l,"INTRO_5"),Qa=new O(l,"INTRO_GARDEN_1"),Ra=new O(l,"INTRO_GARDEN_2"),Sa=new O(l,"SYSTEM_FIRST_YOU_PLAY"),Ta=new O(l,"SYSTEM_WELL_DONE"),Ua=new O(l,"SYSTEM_TIME_TO_TEACH_FRIEND"),Va=new O(l,"LADDER_LOOKS_FUN"),Wa=new O(l,"LADDER_SHOW_ME"),Xa=new O(l,"LADDER_MY_TURN"),Ya=new O(l,"LADDER_PLEASE_HELP_ME"),
Za=new O(l,"LADDER_TREE_OOPS_TOO_HIGH"),$a=new O(l,"LADDER_TREE_OOPS_TOO_LOW"),ab=new O(l,"LADDER_TREE_TRY_A_SMALLER_NUMBER"),bb=new O(l,"LADDER_TREE_TRY_A_BIGGER_NUMBER"),cb=new O(l,"LADDER_TREE_AGENT_SUGGEST_SOLUTION_1"),db=new O(l,"LADDER_TREE_AGENT_SUGGEST_SOLUTION_2"),eb=new O(l,"LADDER_TREE_BETTER_BECAUSE_BIGGER"),fb=new O(l,"LADDER_TREE_BETTER_BECAUSE_SMALLER"),gb=new O(l,"LADDER_TREE_AGENT_PLAY_TOO_LOW"),hb=new O(l,"LADDER_TREE_AGENT_PLAY_TOO_HIGH"),ib=new O(l,"LADDER_TREE_AGENT_SEE_CORRECT"),
jb=new O("34208__acclivity__tongueclick1",l),kb=new O(l,"LADDER_MOUNTAIN_IM_DOWN_HERE"),lb=new O(l,"LADDER_MOUNTAIN_IM_UP_HERE"),mb=new O(l,"LADDER_MOUNTAIN_TRY_FEWER_BALLOONS"),nb=new O(l,"LADDER_MOUNTAIN_TRY_MORE_BALLOONS"),ob=new O(l,"LADDER_MOUNTAIN_AGENT_SUGGEST_SOLUTION_1"),pb=new O(l,"LADDER_MOUNTAIN_AGENT_SUGGEST_SOLUTION_2"),qb=new O(l,"LADDER_MOUNTAIN_BETTER_BECAUSE_BIGGER"),rb=new O(l,"LADDER_MOUNTAIN_BETTER_BECAUSE_SMALLER"),sb=new O(l,"LADDER_MOUNTAIN_AGENT_PLAY_TOO_LOW"),tb=new O(l,
"LADDER_MOUNTAIN_AGENT_PLAY_TOO_HIGH"),ub=new O(l,"LADDER_MOUNTAIN_AGENT_SEE_CORRECT"),vb=new O(l,"LADDER_MOUNTAIN_YOU_SAVED_ME"),wb=new O(l,"LADDER_MOUNTAIN_IM_HUNGRY"),xb={re:va,ld:wa,ne:xa,pd:ya,je:za,od:Aa,oe:Ba,md:Ca,rd:Da,ve:new O(l,"YES_I_THINK_THAT_ONE_IS_BETTER"),ge:Ea,te:Fa,ue:Ga,se:Ha,fe:Ia,qe:Ja,he:new O(l,"MONKEY_HMM"),qd:Ka,sd:La,td:Ma,ud:Na,vd:Oa,wd:Pa,xd:Qa,yd:Ra,ke:Sa,me:Ta,le:Ua,hd:new O(l,"AGENT_BUCKET_IS_FULL"),kd:new O(l,"AGENT_NEED_MORE_WATER"),jd:new O(l,"AGENT_LETS_KEEP_PLAYING"),
Dd:Va,Td:Wa,Rd:Xa,Bd:new O(l,"LADDER_IS_IT_RIGHT"),Cd:new O(l,"LADDER_IT_WAS_RIGHT"),Sd:Ya,Ad:new O(l,"LADDER_AGENT_HELP_IN_INTERRUPT"),ae:Za,be:$a,ee:ab,de:bb,Xd:cb,Yd:db,Zd:eb,$d:fb,Vd:gb,Ud:hb,Wd:ib,ce:jb,Ld:kb,Nd:lb,Od:mb,Pd:nb,Hd:ob,Id:pb,Jd:qb,Kd:rb,Fd:sb,Ed:tb,Gd:ub,Qd:vb,Md:wb,NUMBER_1:new O(l,"NUMBER_1"),NUMBER_2:new O(l,"NUMBER_2"),NUMBER_3:new O(l,"NUMBER_3"),NUMBER_4:new O(l,"NUMBER_4"),NUMBER_5:new O(l,"NUMBER_5"),NUMBER_6:new O(l,"NUMBER_6"),NUMBER_7:new O(l,"NUMBER_7"),NUMBER_8:new O(l,
"NUMBER_8"),NUMBER_9:new O(l,"NUMBER_9"),NUMBER_10:new O(l,"NUMBER_10")},P={},yb=l,Q=l,R=[],S=l,U=k;P.bd=function(a){yb=a;Q=yb.oc};P.Lc=function(){if(S===l){S=[];for(var a in xb){var b=xb[a];xb[a].Sa=a;if(b.ia!=l){var e=l,e="../res/sound/",e={id:a,src:e+b.ia+".ogg|../res/sound/"+b.ia+".mp3"};b.lb!=i&&(e.data=b.lb);S.push(e)}}}return S};
P.play=function(a){var b=a.vb;pa.Vc('"'+b+'"');if(U&&a.Wa){for(var e=new Kinetic.Text({x:0,y:Q.getParent().attrs.height-50,text:N.get(b),fontSize:20,fontFamily:"Nobile",textFill:"white",textStroke:"black",align:"center",fontStyle:"bold",width:Q.getParent().getWidth(),height:50,verticalAlign:"middle",textStrokeWidth:2}),b=0;b<R.length;b++)R[b].attrs.y-=30;R.push(e);Q.add(e);setTimeout(function(){Q.remove(e);for(var a=0;a<R.length;a++)R[a]===e&&R.splice(a,1)},3E3)}a.ia!=l&&SoundJS.play(a.Sa)};
P.stop=function(a){SoundJS.stop(a.Sa)};P.fd=function(){U?(U=m,console.info("Turning off subtitles")):(U=k,console.info("Turning on subtitles"))};function V(){};var zb=oa.extend({init:function(a){this._super("AgentChooser");this.Oa=[{Ba:V,view:W},{Ba:V,view:W},{Ba:V,view:W},{Ba:V,view:W}];this.lc=a},Ce:s("Oa"),zc:function(a){this.lc(a)}});var Lb=ha.extend({init:function(a,b,e,d){function c(c){if(b){var d=new Ab(a,j);d.o();j.a("Game.viewInitiated");j.a("Game.demonstrateGarden",{callback:function(){d.k();c()}})}else c()}function g(){j.a("Game.stopMiniGame");b&&T.k();x.stop();x.k();delete x;J=0;x=l;j.a("miniGameDone")}function h(){function c(){if("Monkey Do"===y){var a=Z.X(aa).Fc();x.play(D,a)}else x.play(D);j.a("miniGameStarted",{})}H();x.o();b&&(K=new I(x,a,ba),K.o(),j.a("Game.miniGameListenersInitiated"));j.a("miniGameInitiated",{});
b?j.l("INTRODUCE_MODE",function(){j.l("INTRODUCE_AGENT",function(){c()})}):c()}function f(){function c(){b&&(T=new Bb(a,j),T.o());p(0);h()}Z=new ia;D=o;y="Child Play";if(0<z.length){var e=z[0];z.splice(0);var f=e.Ic();ma=f;H=function(){x=new f.M(j);I=f.view};c();n(e.Jc())}else d===i&&j.a("Game.showMiniGameChooser",{callback:function(a){ma=a;H=function(){j.a("Game.hideMiniGameChooser");x=new a.M(j);I=a.view};c();n(v)},Ec:Cb})}function p(a){J=a;j.a("backendScoreGameUpdateMiniGame",{Ue:J})}function n(a){j.a("learningTrackUpdate",
{Oe:a})}this._super("Game");var j=this;this.m=ca;this.Ye=a;this.M=this;A=function(a,b){this.Ic=function(){return a};this.Jc=function(){return b}};var w=new ka,o=new Db,r=new Eb,v=new Fb,u=new Gb,F=new Hb,y="Child Play",x=l,I=l,K=l,T=l,H=l,D=o,aa=1,Z=w,J=0,ma=l,L=0,na=0,ba=l,z=[];d!=i&&z.push(new A(d,v));b===i&&(b=k);e===i&&(e=k);b&&new Ib(a);this.Uc=function(){if(x===l)throw{name:"MonkeyWorld.NoActiveMiniGameException",message:"There is no active minigame"};b&&K.k();p(J+x.Gc());if("Child Play"===
y)y="Monkey See",h();else if("Monkey See"===y){var a=x.X();Z.ob(a);y="Monkey Do";D=r;h()}else if("Monkey Do"===y){aa=1;y="Child Play";D=o;g();var a=ma,c=J;if(26<c&&30>=c)z.push(new A(a,F)),z.push(new A(a,F));else if(22<c&&26>=c)z.push(new A(a,u)),z.push(new A(a,u)),z.push(new A(a,u));else if(0<=c&&22>=c)z.push(new A(a,v)),z.push(new A(a.yc.Cb[0],v)),z.push(new A(a,v)),z.push(new A(a,v)),z.push(new A(a,v));else throw"MW.NoSuchMinigameScore";f()}};this.He=function(){return y};this.Je=function(){return aa};
this.Ke=function(){return J};this.Be=function(){return ba};this.start=function(){function d(){e?(g=new zb(function(a){g.k();h!=l&&h.k();ba=a.view;f()}),b&&(h=new Jb(a,g),h.o(),j.a("Game.viewInitiated"))):(ba=W,f())}var g=l,h=l;if(b){var n=new Kb(a,function(a){a?(n.k(),d()):(n.k(),c(d))});n.o();j.a("Game.viewInitiated")}else c(d)};this.stop=function(){g();y="Child Play";aa=1;D=o;Z=w;this.a("Game.stop")};this.Re=function(){this.stop();this.start()};this.ra=function(c){j.a("setPitcherLevelBefore");j.a("setPitcherLevel",
{callback:function(){if(6===L){var d=function(){na+=L;L=0;j.a("resetPitcherLevel");e.k();j.a("Game.gardenWatered");c!=i&&c()};if(b){var e=new Ab(a,j);e.o();j.a("Game.waterGarden",{callback:function(){d()}})}else d()}else c!=i&&c()}});L+=1};this.Mc=function(){return L};this.Ee=function(){return na};this.Ge=function(){return x};this.ga=function(){D=r};this.ha=function(){D=o};this.ca=function(){return D===o};this.ba=function(){return D===r};this.O=function(){return"Child Play"===y};this.A=function(){return"Monkey See"===
y};this.b=function(){return"Monkey Do"===y}}});function Hb(){}Hb.prototype.name=t("Fast");function Gb(){}Gb.prototype.name=t("Medium");function Fb(){}Fb.prototype.name=t("Regular");var Mb=ha.extend({init:function(a){this._super(a)}});var Eb=Mb.extend({init:function(){this._super("AgentPlayer");var a=this;this.Q={};this.Q.Ladder=function(b,e){function d(a){g||(f++,setTimeout(function(){a===h||"incorrect"===e[a]?b.r(b.ib()):b.r(b.N())},2E3))}var c=0,g=m,h=E.q(0,e.length-1),f=0;a.on(fa,function(){d(c++)});a.on("Ladder.incorrect",function(){b.h()||(4>f?d(c++):4===f&&!b.f()&&(P.play(Ya),b.Nc()))});a.on("Ladder.correct",function(){f=0});this.aa=function(){g=k;f=0};this.resume=function(){g=m};a.on("MG_LADDER_HAS_TARGET",function(){setTimeout(function(){b.Ca()},
1500)});a.on("Game.stopMiniGame",function(){a.L()})}}});var Db=Mb.extend({init:function(){this._super("GamerPlayer");this.wb("GamerPlayer");this.Q=q();this.Q.Ladder=q()}});var Nb=oa.extend({init:function(a,b){this._super(b);this.u=a;this.$c=a.Uc;var e=this;this.Ua=m;this.oa=[];this.Va=m;this.pa=[];var d=l,c=10,g=l;this.Xa=function(a){d.Zc(a)};this.Da=function(){d.Da()};this.rc=function(a){this.oa.push(a)};this.sc=function(a){this.pa.push(a)};this.Fa=function(){0<c&&(c--,e.a("backendScoreUpdateMode",{uc:c},k));d.Fa()};this.mb=function(){return d.mb()};this.X=function(){return d};this.Gc=function(){return c};this.Se=q();this.play=function(a,b){c=10;e.a("backendScoreUpdateMode",
{uc:c},k);d=new ja;a.Q[this.e]!==i&&(g=new a.Q[this.e](this,b));e.start()};var h=m,f=m,p=[];this.Rc=function(){h=k;g!==i&&g!==l&&(g.aa(),e.ha());for(var a=0;a<p.length;a+=1)p[a]()};this.qc=function(a){p.push(a)};this.ad=function(){h=m;e.ga();g.resume()};this.h=function(){return h};this.Nc=function(){f=k;e.ha()};this.Oc=function(){f=m;e.ga()};this.f=function(){return f}},start:function(){if(this.Ua)throw{name:"MW.MinigameModuleAlreadyStarted",message:"This minigame module ("+this.e+") has already been started."};
for(this.Ua=k;0<this.oa.length;)this.oa.shift()()},stop:function(){if(this.Va)throw{name:"MW.MinigameModuleAlreadyStopped",message:"This minigame module ("+this.e+") has already been stopped."};for(this.Va=k;0<this.pa.length;)this.pa.shift()()},ra:function(a){return this.u.ra(a)},ga:function(){return this.u.ga()},ha:function(){return this.u.ha()},ca:function(){return this.u.ca()},ba:function(){return this.u.ba()},O:function(){return this.u.O()},A:function(){return this.u.A()},b:function(){return this.u.b()}}).extend({init:function(a){function b(a){r=
k;c.b()&&!c.h()?c.l(ea,a):a()}function e(){p=E.q(g,h);v+=1;E.ta(c.R(da),function(){c.a(fa);c.a(B,{},k);c.b()||c.a(C,{},k)})()}function d(){var a=3<=j,b=1<=w;3===w||a&&b?c.l(ga,c.$c):e()}this._super(a,"Ladder");var c=this,g=1,h=6,f=[],p=E.q(g,h),n=l,j=0,w=0,o=m,r=m,v=0,u=0,F=0;c.z(function(){var a,b=0;for(a=g;a<=h;a+=1)f[b]=a,b+=1});this.Ca=function(){w+=1;c.O()?(c.l("MG_LADDER_CONFIRM_TARGET"),c.l("MG_LADDER_GET_TREAT",d)):(c.a("MG_LADDER_CONFIRM_TARGET"),c.ra(d))};this.r=function(a){n=a;j+=1;E.ta(b,
c.R("MG_LADDER_PICKED",{Pe:a,xe:a===p}),c.sb("MG_LADDER_IGNORE_INPUT"),function(b){F=c.f()?F+1:0;c.f()&&a===p&&c.Oc();b()},function(b){a===p&&(a<u&&(c.h()||c.f()))&&c.a("Ladder.betterBecauseSmaller");a===p&&(a>u&&(c.h()||c.f()))&&c.a("Ladder.betterBecauseBigger");a!==p&&(c.h()||c.f())&&c.a("Ladder.hmm");c.b()&&(u=a);if(c.b()&&!c.f()||c.f()&&a===p)c.ad(),c.a("MG_LADDER_FORBID_GAMER_INPUT",{},k);b()},c.R("MG_LADDER_HELPER_APPROACH_TARGET"),function(b){r=m;c.b()&&c.a("MG_LADDER_FORBID_INTERRUPT");a===
p?(o=k,E.ta(c.R("MG_LADDER_GET_TARGET"),c.R("MG_LADDER_RESET_SCENE"),c.sb("MG_LADDER_HAS_TARGET"),function(){c.Xa("correct");o=m;b()})()):c.l("MG_LADDER_RESET_SCENE",function(){c.a(B,{},k);c.b()||c.a(C);c.Fa();c.a("Ladder.incorrect");4<=F&&c.a("Ladder.agentSuggestSolution");c.Xa("incorrect");b()});a<p&&(c.b()&&!c.h()&&!c.f())&&c.a("Ladder.agentTooLow");a>p&&(c.b()&&!c.h()&&!c.f())&&c.a("Ladder.agentTooHigh");a<p&&(c.A()||c.h()||c.f())&&c.a("Ladder.tooLow");a>p&&(c.A()||c.h()||c.f())&&c.a("Ladder.tooHigh");
n=l})()};this.N=function(){return p};this.ib=function(){var a=E.q(0,f.length-1);return f[a]===p?this.ib():f[a]};this.n=function(){if(n===l)throw{name:"No number chosen yet",M:"Ladder",message:"A chosen number was asked for in the Ladder Game, but no number has yet been chosen by the user or the agent."};return n};this.Fe=t(3);this.Y=function(){if(0===v)throw"MinigameNotStartedException";return v};this.va=function(){return f};this.qc(function(){r&&c.b()&&(r=m,c.b()&&c.a("MG_LADDER_FORBID_INTERRUPT"),
c.Da(),j-=1,o||(c.a(C,{},k),c.a("MG_LADDER_INTERRUPT",{}),c.l("MG_LADDER_RESET_SCENE",function(){c.a(B,{},k)})))});this.rc(function(){c.a("MG_LADDER_IGNORE_INPUT",{},k);c.a("MG_LADDER_FORBID_GAMER_INPUT",{},k);c.b()?c.l("MG_LADDER_START_AGENT",e):e()});this.sc(function(){c.a("Game.roundDone")})}});function Ob(){var a=[];this.v=function(b){E.za(a,b)||a.push(b);return Tween.get(b)};this.removeTweens=function(a){Tween.removeTweens(a)};this.Ja=function(){for(var b=0;b<a.length;b++)Tween.removeTweens(a[b])}}var X=oa.extend({init:function(a,b){this._super(b);this.nc=a;this.qa=new Ob},k:function(){this._super();this.qa.Ja()},o:function(){this._super()},v:function(a){return this.qa.v(a)},qb:function(a){this.qa.removeTweens(a)},getStage:s("nc")});var W=Class.extend({init:function(a,b){function e(){d.blink.show();setTimeout(function(){d.blink.setAnimation("blink");d.blink.afterFrame(d.fb.blink.length-1,function(){d.blink.setAnimation("idle");e()})},E.q(2E3,5E3))}this.container=a;this.ub=m;this.group=new Kinetic.Group(b);this.container.add(this.group);this.i=new Kinetic.Sprite({image:this.Qc,animation:"idle",animations:this.animations,frameRate:4,visible:m});this.face=new Kinetic.Sprite({image:this.Bc,animation:"neutral",animations:this.Cc,
frameRate:4,x:this.w.face.x,y:this.w.face.y,visible:m});this.blink=new Kinetic.Sprite({image:this.vc,animation:"idle",animations:this.fb,frameRate:15,x:this.w.face.x,y:this.w.face.y,visible:m});this.c=new Kinetic.Sprite({image:this.Yc,animation:"pointAt",animations:this.ea,frameRate:5,visible:m,x:this.w.arm.x,y:this.w.arm.y});var d=this;e();this.group.add(this.i);this.group.add(this.c);this.group.add(this.face);this.group.add(this.blink);this.start=function(){d.ub||(d.ub=k,this.i.show(),this.i.start(),
this.face.start(),this.blink.start(),this.blink.show())};this.Ha=function(){this.i.setPosition({x:0,y:0})}},ya:function(){this.start();this.face.show();this.blink.show();this.i.setAnimation("idle");this.Ha()},K:function(){this.start();this.face.hide();this.blink.hide();this.i.setAnimation("dance");this.i.setPosition(this.w.dance)},da:function(a,b){this.start();this.i.setAnimation("idle-no-arm");this.c.show();this.c.setAnimation("pointAt"+a);var e=this;this.kc=a;this.c.afterFrame(e.ea["pointAt"+a].length-
2,function(){e.c.stop();b()});this.c.start()},rb:function(a){this.start();this.c.stop();this.i.setAnimation("idle-no-arm");this.c.show();var b=this;if(4>this.c.getIndex()){var e=this.c.getIndex();this.c.setIndex(this.ea["pointAt"+this.kc].length-e-2)}this.c.setAnimation("reset");this.c.afterFrame(this.ea.reset.length-1,function(){b.c.stop();b.c.hide();b.i.setAnimation("idle");a!==i&&a()});this.c.start()},Sc:function(){this.start();this.face.hide();this.blink.hide();this.i.setAnimation("jump");this.Ha()},
xa:function(){this.start();this.face.show();this.blink.show();this.i.setAnimation("head");this.Ha()},j:function(a){this.start();this.face.show();this.blink.show();this.face.setAnimation("talk");var b=this;a!==i&&setTimeout(function(){b.nb()},a)},nb:function(){this.start();this.face.show();this.blink.show();this.face.setAnimation("neutral")},hb:function(){return this.w.feet},transitionTo:function(a){this.group.transitionTo(a)},Ve:function(a){this.group.moveTo(a)},setX:function(a){this.group.setX(a)},
setY:function(a){this.group.setY(a)},setPosition:function(a){this.group.setPosition(a)},Ta:function(){this.container.remove(this.group)}}).extend({init:function(a,b){this.Qc=G.Hb;this.Bc=G.Fb;this.vc=G.Eb;this.Yc=G.Gb;this.animations={idle:[{x:311,y:0,width:249,height:338}],"idle-no-arm":[{x:0,y:1675,width:249,height:338}],dance:[{x:0,y:0,width:249,height:404},{x:0,y:454,width:249,height:403},{x:0,y:907,width:249,height:404}],head:[{x:300,y:473,width:249,height:266}],jump:[{x:0,y:1361,width:261,height:264}]};
this.Cc={happy:[{x:0,y:0,width:220,height:150}],neutral:[{x:0,y:200,width:220,height:150}],surprised:[{x:0,y:400,width:220,height:150}],talk:[{x:0,y:600,width:201,height:129},{x:0,y:200,width:220,height:150}]};this.fb={idle:[{x:0,y:0,width:1,height:1}],blink:[{x:0,y:0,width:176,height:85},{x:0,y:135,width:177,height:91},{x:0,y:276,width:178,height:98}]};this.ea={pointAt6:[{x:0,y:0,width:320,height:430},{x:0,y:480,width:320,height:430},{x:0,y:960,width:320,height:430},{x:0,y:1440,width:320,height:430},
{x:0,y:1920,width:320,height:430}],pointAt5:[{x:0,y:0,width:320,height:430},{x:0,y:480,width:320,height:430},{x:0,y:960,width:320,height:430},{x:0,y:1440,width:320,height:430},{x:370,y:0,width:320,height:430}],pointAt4:[{x:0,y:0,width:320,height:430},{x:0,y:480,width:320,height:430},{x:0,y:960,width:320,height:430},{x:0,y:1440,width:320,height:430},{x:370,y:480,width:320,height:430}],pointAt3:[{x:0,y:0,width:320,height:430},{x:0,y:480,width:320,height:430},{x:0,y:960,width:320,height:430},{x:0,y:1440,
width:320,height:430},{x:370,y:960,width:320,height:430}],pointAt2:[{x:0,y:0,width:320,height:430},{x:0,y:480,width:320,height:430},{x:0,y:960,width:320,height:430},{x:0,y:1440,width:320,height:430},{x:370,y:1440,width:320,height:430}],pointAt1:[{x:0,y:0,width:320,height:430},{x:0,y:480,width:320,height:430},{x:0,y:960,width:320,height:430},{x:0,y:1440,width:320,height:430},{x:370,y:1920,width:320,height:430}],reset:[{x:0,y:1440,width:320,height:430},{x:0,y:960,width:320,height:430},{x:0,y:480,width:320,
height:430},{x:0,y:0,width:320,height:430}]};this.w={dance:{x:0,y:-64},face:{x:-12,y:-11},feet:{x:0,y:-315},arm:{x:-216,y:-196}};this._super(a,b)}});var Jb=X.extend({init:function(a,b){this._super(a,"AgentChooserView");this.Ra=b;var e=this;this.d=l;this.Ma={la:{fc:363,gc:150,t:2},g:{t:250,I:250,Na:60}};this.na=function(){var a=[];this.add=function(b){a.push(b)};this.ze=function(){for(var b=0;b<a.length;b++)a[b].attrs.listening=k};this.Ac=function(){for(var b=0;b<a.length;b++)a[b].attrs.listening=m};this.wc=function(b,g){for(var h=0;h<a.length;h++)a[h]===b?e.setTimeout(function(){b.transitionTo({x:e.getStage().getWidth()/2,y:e.getStage().getHeight()/
2,scale:{x:1.5,y:1.5},duration:1,callback:function(){P.play(Ba);e.setTimeout(g,5E3)}})},1E3):a[h].transitionTo({opacity:0,duration:1})};return this}();this.ic=function(a,b,g,h){var f=new Kinetic.Group({x:b,y:g}),b=e.Ma,b=new Kinetic.Rect({width:b.g.t,height:b.g.I,fill:{start:{x:b.g.t/2,y:b.g.I/2,radius:0},end:{x:b.g.t/2,y:b.g.I/2,radius:0.75*b.g.t},colorStops:[0,"#00FF7F",1,"#556B2F"]},shadow:{color:"black",blur:15,offset:[15,15],opacity:0.5},opacity:0.6,cornerRadius:10,strokeWidth:4,stroke:"white",
offset:{x:b.g.t/2,y:b.g.I/2}});f.add(b);f.C=b;f.jc=a;h.add(f);(new a.view(f,{x:-110,y:-60,scale:0.9})).xa();f.on("mousedown touchstart",function(){P.play(ya);f.C.setFill("white");f.moveToTop();e.na.wc(f,function(){e.Ra.zc(f.jc)});e.na.Ac()});return f}},o:function(){this._super();this.d=new Kinetic.Layer;this.getStage().add(this.d);var a=new Kinetic.Image({image:G.Vb});this.d.add(a);for(var a=this.Ma,a=E.Z(a.la.fc,a.la.gc,a.g.t+a.g.Na,a.g.I+a.g.Na,a.la.t),b=this.Ra.Oa,e=0;e<b.length;e++){var d=a.next(),
d=new this.ic(b[e],d.x,d.y,this.d);this.na.add(d)}P.play(Aa);this.d.draw()},k:function(){this._super();this.getStage().remove(this.d)}});var Ab=X.extend({init:function(a){this._super(a,"GardenView");var b=this,e,d,c,g,h,f;b.z(function(){e=new Kinetic.Image({image:G.Ub});d=new Kinetic.Image({image:G.Tb});g=new Kinetic.Group({x:300,y:300,visible:m});h=new Kinetic.Image({image:G.p,offset:{x:G.p.width/2,y:G.p.height/2}});f=new Kinetic.Polygon({points:[{x:40,y:0},{x:60,y:0},{x:80,y:40},{x:41,y:63},{x:15,y:17}],offset:{x:G.p.width/2,y:G.p.height/2},fill:"blue"});c=new Kinetic.Layer;a.add(c);c.add(e);c.add(g);g.add(f);g.add(h)});b.G(function(){a.remove(c)});
b.on("frame",function(){c.draw()});b.on("Game.demonstrateGarden",function(a){P.play(Qa);d.setOpacity(0);c.add(e);c.add(d);var f=new Kinetic.Group({x:10,y:10}),g=new Kinetic.Rect({width:100,height:30,fill:"gray"}),h=new Kinetic.Text({text:"Skip",width:100,height:30,y:10,align:"center",fontFamily:"Arial",textFill:"black"});f.add(g);f.add(h);f.on("mousedown touchstart",function(){a.callback()});c.add(f);b.setTimeout(function(){P.play(Ra);e.transitionTo({opacity:0,duration:2});d.transitionTo({opacity:1,
duration:2,callback:function(){b.setTimeout(function(){a.callback()},2E3)}})},3E3)});b.on("Game.waterGarden",function(a){var c=f.attrs.points,d=(c[0].y-c[4].y)/(c[0].x-c[4].x),e=(c[2].y-c[1].y)/(c[2].x-c[1].x),o=c[0].y+17,r=c[0].y-d*c[0].x,v=c[2].y-e*c[2].x;h.setRotation(Math.PI/3);g.show();setTimeout(function(){b.v(f.attrs.points[0]).to({x:(o-r)/d,y:o},3E3);b.v(f.attrs.points[1]).to({x:(o-v)/e,y:o},3E3).call(function(){var d=(c[3].y-c[4].y)/(c[3].x-c[4].x),g=c[3].y-d*c[3].x;o+=c[3].y-c[2].y;b.v(f.attrs.points[0]).to({x:(o-
g)/d,y:o},3E3);b.v(f.attrs.points[1]).to({x:(o-v)/e,y:o},3E3).call(function(){o+=c[3].y-c[2].y;b.v(f.attrs.points[0]).to({x:(o-g)/d,y:o},2E3);b.v(f.attrs.points[1]).to({x:(o-g)/d,y:o},2E3).call(function(){b.setTimeout(function(){a.callback()},3E3)})})})},2E3)})}});var Kb=X.extend({init:function(a,b){this._super(a,"IntroductionView");this.Qa=b;this.d=new Kinetic.Layer},o:function(){var a=this;this._super();this.getStage().add(this.d);(new W(this.d,{x:100,y:200,scale:0.7})).K();(new W(this.d,{x:300,y:200,scale:0.7})).K();(new W(this.d,{x:500,y:200,scale:0.7})).K();(new W(this.d,{x:700,y:200,scale:0.7})).K();var b=new Kinetic.Group({x:10,y:10}),e=new Kinetic.Rect({width:100,height:30,fill:"gray"}),d=new Kinetic.Text({text:"Skip",width:100,height:30,y:10,align:"center",
fontFamily:"Arial",textFill:"black"});b.add(e);b.add(d);b.on("mousedown touchstart",function(){a.Qa(k)});this.d.add(b);this.d.draw();this.setTimeout(function(){P.play(La)},2E3);this.setTimeout(function(){P.play(Ma)},2E3);this.setTimeout(function(){P.play(Na)},7E3);this.setTimeout(function(){P.play(Oa)},7E3);this.setTimeout(function(){P.play(Pa)},12E3);this.setTimeout(function(){a.Qa(m)},14E3)},k:function(){this._super();this.getStage().remove(this.d)}});var Bb=X.extend({init:function(a,b){this._super(a,"MinigameHandlerView");var e=a.ua(),d=this,c,g,h,f,p=10,n=20;d.z(function(){c=new Kinetic.Image({image:G.p,x:e.getStage().getWidth()-G.p.width-20,y:20,width:G.p.width,height:G.p.height,visible:m});g=new Kinetic.Image({image:G.U,offset:{x:G.U.width/2,y:0},width:G.U.width,height:G.U.height,visible:m,rotation:Math.PI});h=new Kinetic.Image({image:G.ma,x:c.getX(),y:c.getY(),width:G.ma.width,height:G.ma.height,visible:m});f=new Kinetic.Rect({fill:"#379de4",
x:c.getX()+20,y:c.getY()+c.getHeight()-4,width:54,height:0});e.add(h);e.add(f);e.add(g);e.add(c)});d.G(function(){e.remove(g);e.remove(c);e.remove(h);e.remove(f)});d.z(function(){c.show();var a=b.Mc();0<a&&h.show();f.setHeight(f.getHeight()-6.9*a)});d.on("resetPitcherLevel",function(){h.hide();f.setHeight(0)});d.on("setPitcherLevelSetDropOrigin",function(a){p=a.x;n=a.y});d.on("setPitcherLevel",function(a){var e=c.getX()+c.getWidth()/2,o=c.getY()+c.getHeight()-g.getHeight(),r=1E3*(Math.sqrt(Math.pow(p-
e,2)+Math.pow(n-o,2))/200);g.setX(p);g.setY(n);g.setOpacity(1);g.show();b.A()?P.play(Ha):b.b()&&(P.play(Fa),P.play(Ga),d.setTimeout(function(){P.play(Ia)},2E3));g.transitionTo({x:e-50,y:o,duration:1.2*r/1E3,callback:function(){g.transitionTo({rotation:4*Math.PI/3,x:e-50,y:o-30,duration:0.3,callback:function(){g.transitionTo({rotation:5*Math.PI/3,x:e-25,y:o-25,duration:0.3,callback:function(){g.transitionTo({rotation:6*Math.PI/3,x:e,y:o,duration:0.3,callback:function(){P.play(Ka);h.show();f.transitionTo({height:f.getHeight()-
6.9,duration:1});g.transitionTo({opacity:0,duration:1,callback:function(){d.setTimeout(function(){g.hide();g.setRotation(Math.PI);a.callback!=i&&a.callback()},1E3)}})}})}})}})}})})}});var Ib=X.extend({init:function(a){this._super(a,"MonkeyWorldView");var b=a.ua(),e=[];this.on("Game.showMiniGameChooser",function(a){var c=a.callback,d=a.Ec,g=E.Z(200,200,300,100,2),j;for(j in d)(function(){for(var a=0;a<d[j].ed;a++)(function(){var h=d[j].Cb[a],r=g.next(),r=new Kinetic.Group(r),v=new Kinetic.Rect({width:280,height:100,stroke:"black",strokeWidth:4}),u=new Kinetic.Text({text:h.title,fontSize:20,fontFamily:"sans-serif",textFill:"black",align:"center",verticalAlign:"center",width:280,
height:100,y:40});u.setAlign("center");r.add(v);r.add(u);r.on("mousedown touchstart",function(){v.setFill("yellow");c(h)});e.push(r);b.add(r)})()})()});this.on("Game.hideMiniGameChooser",function(){for(var a=0;a<e.length;a++)b.remove(e[a]);e=[]});var d=new Kinetic.Rect({x:a.getWidth()/2,y:a.getHeight()/2,width:320,height:50,cornerRadius:10,offset:{x:160,y:25},fill:"#333",opacity:0}),c=new Kinetic.Rect({x:a.getWidth()/2,y:a.getHeight()/2,width:0,height:30,offset:{x:150,y:15},fill:"#FFCC00"}),g=new Kinetic.Text({fontFamily:"Arial",
fontSize:10,textFill:"black",fontStyle:"bold",Ze:"black",text:"Monkey World Demo",align:"center",width:a.getWidth(),height:50,y:a.getHeight()/2-50,x:0});this.on("Game.showLoadingScreen",function(a){b.add(d);b.add(c);b.add(g);d.transitionTo({opacity:1,duration:a.time/1E3})});this.on("Game.loadingSounds",function(){g.setText(N.get("INIT_LOADING_SOUNDS"));b.draw()});this.on("Game.loadingImages",function(){g.setText(N.get("INIT_LOADING_IMAGES"));b.draw()});this.on("Game.loadingDone",function(){b.remove(g);
b.remove(d);b.remove(c);b.draw()});this.on("Game.updateSoundLoading",function(a){c.setWidth(300*a.progress);b.draw()});this.on("Game.updateImageLoading",function(a){c.setWidth(300*a.progress);b.draw()})}});Kinetic.s.Yb=function(){var a={x:750,y:600,opacity:0},b=m;a.image=G.Jb;a.width=208;a.height=208;a.offset={x:104,y:104};a.animations={shake:[{x:0,y:0,width:208,height:208},{x:0,y:258,width:208,height:208},{x:0,y:516,width:208,height:208},{x:0,y:258,width:208,height:208},{x:0,y:0,width:208,height:208},{x:0,y:1032,width:208,height:208},{x:0,y:1290,width:208,height:208},{x:0,y:1032,width:208,height:208},{x:0,y:0,width:208,height:208},{x:0,y:258,width:208,height:208},{x:0,y:516,width:208,height:208},{x:0,
y:258,width:208,height:208},{x:0,y:0,width:208,height:208},{x:0,y:1032,width:208,height:208},{x:0,y:1290,width:208,height:208},{x:0,y:1032,width:208,height:208}],idle:[{x:0,y:0,width:208,height:208}]};a.animation="idle";a.frameRate=10;var e=new Kinetic.Sprite(a);this.animate=function(){b||(e.start(),b=k);e.setAnimation("shake");e.afterFrame(a.animations.shake.length-1,function(){e.setAnimation("idle")})};e.animate=this.animate;return e};Kinetic.s.hc=function(){var a={x:900,y:600,opacity:0},b=m;a.image=G.Lb;a.width=224;a.height=224;a.offset={x:112,y:112};a.animations={shake:[{x:0,y:0,width:224,height:224},{x:0,y:274,width:224,height:224},{x:0,y:548,width:224,height:224},{x:0,y:274,width:224,height:224},{x:0,y:0,width:224,height:224},{x:0,y:274,width:224,height:224},{x:0,y:548,width:224,height:224},{x:0,y:274,width:224,height:224}],idle:[{x:0,y:0,width:224,height:224}]};a.animation="idle";a.frameRate=10;var e=new Kinetic.Sprite(a);
this.animate=function(){b||(e.start(),b=k);e.setAnimation("shake");e.afterFrame(a.animations.shake.length-1,function(){e.setAnimation("idle")})};e.animate=this.animate;return e};Kinetic.s.Wb=function(a){var a=new Kinetic.Group(a),b,e,d={},c={};d.idle=[{x:0,y:0,width:181,height:309}];d.walking=[{x:0,y:718,width:181,height:309},{x:0,y:359,width:181,height:309}];d.openMouth=[{x:0,y:1077,width:181,height:309},{x:0,y:1436,width:181,height:309},{x:0,y:1795,width:181,height:309},{x:231,y:0,width:181,height:309}];d.closeMouth=[{x:231,y:0,width:181,height:309},{x:0,y:1795,width:181,height:309},{x:0,y:1436,width:181,height:309},{x:0,y:1077,width:181,height:309}];d.keepMouthOpen=[{x:231,
y:0,width:181,height:309}];c.idleIn=[{x:0,y:0,width:500,height:500}];c.out=[{x:0,y:0,width:500,height:500},{x:0,y:550,width:500,height:500},{x:0,y:1100,width:500,height:500},{x:0,y:1650,width:500,height:500},{x:550,y:0,width:500,height:500}];c["in"]=[{x:550,y:0,width:500,height:500},{x:0,y:1650,width:500,height:500},{x:0,y:1100,width:500,height:500},{x:0,y:550,width:500,height:500},{x:0,y:0,width:500,height:500}];c.idleOut=[{x:550,y:0,width:500,height:500}];b=new Kinetic.Sprite({image:G.cc,animations:d,
animation:"idle",frameRate:5});e=new Kinetic.Sprite({image:G.dc,animations:c,animation:"idleIn",frameRate:10,visible:m,x:109,y:81,offset:{x:279,y:281}});a.add(e);a.add(b);this.ja=function(){b.setAnimation("walking")};this.P=function(){b.setAnimation("idle")};a.ja=this.ja;a.P=this.P;this.La=function(a){b.setAnimation("openMouth");b.afterFrame(d.openMouth.length-1,function(){b.setAnimation("keepMouthOpen");e.setAnimation("out");e.show();e.afterFrame(c.out.length-1,function(){e.setAnimation("idleOut");
a()})})};this.Ka=function(a){e.setAnimation("in");e.afterFrame(c["in"].length-1,function(){e.setAnimation("idleIn");e.hide();b.setAnimation("closeMouth");b.afterFrame(d.closeMouth.length-1,function(){b.setAnimation("idle");a()})})};this.start=function(){b.start();e.start()};a.Ka=this.Ka;a.La=this.La;a.start=this.start;return a};Kinetic.s.bc=function(a){var b;b=new Kinetic.Group(a);switch(a.type){case 1:a=G.Zb;break;case 2:a=G.$b;break;case 3:a=G.ac;break;default:throw"NoSuchParcelTypeException";}a=new Kinetic.Image({image:a,width:a.width,height:a.height,scale:0.6+0.4*Math.random(),offset:{x:a.width/2,y:a.height/2}});b.add(a);b.cd=function(){function a(f,p){b.transitionTo({x:d+f*g,y:c+f*g,duration:h,callback:function(){if(0<p){var g=p-=1;a(-f,g)}else b.transitionTo({x:d,y:c,duration:h})}})}var d=b.getX(),c=b.getY(),g=4,h=
0.1;a(1,9)};b.Xc=function(a){b.on("mousedown touchstart",a)};b.Wc=function(){b.off("mousedown touchstart")};b.open=q();return b};var Pb=X.extend({init:function(a,b,e,d){this._super(b,d);var c=b.ua(),g=this;g.z(function(){if(a.O()){var d=new e(c,{x:b.getWidth()-260,y:12,scale:0.5});g.G(function(){d.Ta()});d.xa();g.on("INTRODUCE_MODE",function(a){P.play(Sa);setTimeout(a,2E3)})}else if(a.A())d=new e(c,{x:b.getWidth()-260,y:12,scale:0.5}),g.G(function(){d.Ta()}),d.xa(),g.on("INTRODUCE_MODE",function(a){P.play(Ta);g.setTimeout(function(){P.play(Ua);g.setTimeout(function(){d.transitionTo({opacity:0,duration:2});a()},3E3)},2E3)});
else if(a.b())g.on("INTRODUCE_MODE",function(a){a()})});this.Ae=function(){throw{name:"AgentBodyNotInitiatedYet",message:"The body view of the agent has not yet been initated"};};this.Xe=q()}}).extend({init:function(a,b,e,d){this._super(a,b,e,d);this.wb(d);var c=this,g=l,h=l,f=l,p,n,j=l,w=0.8;this.Za=function(a){g=new Kinetic.s.Yb;h=new Kinetic.s.hc;g.setScale(0.4);h.setScale(0.4);a.add(g);a.add(h)};this.Ya=function(a,b,c){p=a;n=b;j=c;w=0.8};this.$a=function(a){f.j(a)};this.da=function(b,d){f.da(a.n(),
function(){c.setTimeout(function(){a.h()||(c.r(a.n(),d),c.setTimeout(function(){f.rb(q())},1E3))},3E3)})};this.on("MG_LADDER_INTERRUPT",function(){c.aa();a.b()&&(f.rb(),f.j(2E3),P.play(Ja))});this.on(ea,function(b){g.on("mousedown touchstart",function(){g.animate();P.play(wa);a.Rc()});h.on("mousedown touchstart",function(){h.animate();P.play(xa)});b()});this.on("MG_LADDER_FORBID_INTERRUPT",function(){g.off("mousedown touchstart");h.off("mousedown touchstart")});this.on("MG_LADDER_START_AGENT",function(a){f.j(2E3);
P.play(Xa);c.setTimeout(function(){a();g.transitionTo({opacity:1,duration:1});h.transitionTo({opacity:1,duration:1})},2E3)});this.on(ga,function(b){P.play(va);a.O()?c.setTimeout(b,4E3):(f.K(),c.setTimeout(function(){f.ya();c.setTimeout(b,1500)},3E3))});this.on("INTRODUCE_AGENT",function(d){a.A()?(f=new e(j,{x:b.getWidth()-260,y:12,opacity:0,scale:w}),c.$!==i&&c.$(),h.moveToTop(),g.moveToTop(),f.Sc(),f.transitionTo({opacity:1,duration:1,callback:function(){f.transitionTo({x:p,y:n+f.hb().y,duration:1,
callback:function(){f.ya();f.j();P.play(Va);c.setTimeout(function(){P.play(Wa);c.setTimeout(function(){f.nb();d()},1500)},2E3)}})}})):(a.b()&&(f=new e(j,{x:p,y:n,scale:w}),c.$!==i&&c.$(),h.moveToTop(),g.moveToTop(),f.setY(n+f.hb().y),f.ya()),d())});this.on("MG_LADDER_GET_TREAT",function(a){c.jb(a)});this.on("MG_LADDER_CONFIRM_TARGET",function(){c.gb()});this.on("Ladder.betterBecauseBigger",function(){f.j(2E3);P.play(c.cb)});this.on("Ladder.betterBecauseSmaller",function(){f.j(2E3);P.play(c.eb)});
this.on("Ladder.hmm",function(){f.j(2E3);P.play(Ea)});this.on("Ladder.agentSuggestSolution",function(){f.j(4E3);c.setTimeout(function(){P.play(c.Ia);c.setTimeout(function(){P.play(c.Ia)},2E3)},2E3)});this.on("Ladder.tooLow",function(){f.j(4E3);P.play(c.zb);setTimeout(function(){P.play(c.Ab)},2E3)});this.on("Ladder.tooHigh",function(){f.j(4E3);P.play(c.yb);setTimeout(function(){P.play(c.Bb)},2E3)});this.on("Ladder.agentTooLow",function(){f.j(2E3);P.play(c.bb)});this.on("Ladder.agentTooHigh",function(){f.j(2E3);
P.play(c.ab)})}});var Qb=Pb.extend({init:function(a,b,e){this._super(a,b,e,"MtView");var d=this;d.zb=lb;d.yb=kb;d.Ab=nb;d.Bb=mb;d.Ia=ob;d.dd=pb;d.bb=sb;d.ab=tb;d.cb=qb;d.eb=rb;d.tc=ub;var c=m,g=l,h=m,f=new Kinetic.Layer,p=[],n=new Kinetic.Group({x:400,y:600}),j=new Kinetic.Rect({width:50,height:50,fill:"blue",stroke:"black",strokeWidth:4,offset:{x:25,y:50}});Kinetic.Mb=function(a,b){var c=new Kinetic.Group({x:a,y:b}),d=new Kinetic.Circle({fill:"red",stroke:"black",strokeWidth:4,radius:20}),e=new Kinetic.Line({stroke:"black",
strokeWidth:4,points:[0,20,0,65]});c.add(e);c.add(d);return c};d.z(function(){b.add(f);var e=new Kinetic.Polygon({points:[50,600,350,600,150,100],fill:"gray",stroke:"black",strokeWidth:4});n.add(new Kinetic.Polygon({points:[0,0,100,0,110,-50,-10,-50],fill:"#993300",stroke:"black",strokeWidth:4}));for(var g=new E.Z(730,180,140,140,2),r=0;6>r;r++)(function(b){var d=g.next(),d=new Kinetic.Group({x:d.x,y:d.y}),e=new Kinetic.Group({x:40,y:40}),j=new Kinetic.Rect({width:140,height:140,fill:"yellow",strokeWidth:4,
stroke:"black"});d.add(j);p.push(d);for(var n=0,r=0;r<=b;r++)3===r&&n++,e.add(new Kinetic.Mb(30*r-81*n,30*n));d.add(e);d.C=j;d.Pa=e;d.on("mousedown touchstart",function(){c&&a.ca()?a.r(b+1):a.ba()&&!h&&(h=k,P.play(za),setTimeout(function(){P.play(Ca);setTimeout(function(){h=m},2E3)},2E3))});f.add(d)})(r);f.add(e);e=a.va();for(r=0;r<e.length;r++){var v=new Kinetic.Line({points:[280-24*r,430-60*r,280-24*r+100,430-60*r],stroke:"black",strokeWidth:4});f.add(v)}j.hide();f.add(j);f.add(n);d.Za(f);f.draw()});
d.aa=function(){g!=l&&g();n.transitionTo({x:400,y:600,duration:0.5})};d.on(da,function(b){var c=a.N()-1;j.setX(280-24*c);j.setY(430-60*c);j.show();f.draw();b()});d.on("MG_LADDER_IGNORE_INPUT",function(){c=m});d.on(B,function(){c=k});d.on(C,q());d.on("MG_LADDER_FORBID_GAMER_INPUT",q());this.wa=function(a){a=p[a-1];return{x:a.getX()+a.C.getWidth()/2,y:a.getY()+a.C.getHeight()/2}};d.Ya(b.getWidth()-500,b.getHeight()-50,f);this.r=function(a,b){c=m;var e=p[a-1].Pa,f=p[a-1];f.C.setFill("red");var h=f.Pa.getX(),
j=e.getY();g=function(){d.qb(e.attrs);e.setX(h);e.setY(j);e.moveTo(f);f.C.setFill("yellow")};e.transitionTo({x:-Math.abs(400-f.getX())+20,y:600-f.getY()+-110,duration:3,callback:function(){e.moveTo(n);e.setX(20);e.setY(-110);e.moveDown();b()}})};d.on("MG_LADDER_PICKED",function(b){a.b()&&!a.h()&&!a.f()?(d.wa(a.n()),P.play(Da),d.setTimeout(function(){d.da(a.n(),b)},1500)):d.r(a.n(),b)});d.on("MG_LADDER_HELPER_APPROACH_TARGET",function(b){var c=a.n();n.transitionTo({x:280-24*(c-1)+100,y:430-60*(c-1),
duration:1.5,callback:b})});d.on("MG_LADDER_GET_TARGET",function(a){P.play(vb);d.setTimeout(function(){P.play(wb)},2E3);j.transitionTo({x:n.getX()+50,y:n.getY()+-25,duration:0.7,callback:function(){n.transitionTo({x:400,y:600,duration:2});j.transitionTo({x:450,y:575,duration:2,callback:function(){j.transitionTo({x:550,y:600,duration:1.5,callback:a})}})}})});d.on("MG_LADDER_HAS_TARGET",function(){a.b()||a.Ca()});d.gb=q();d.jb=function(a){a()};d.on("MG_LADDER_RESET_SCENE",function(a){function b(){g!=
l&&g();a()}600!=n.getY()?n.transitionTo({x:400,y:600,duration:1.5,callback:b}):b()});this.G(function(){b.remove(f)})}});function Rb(a){a.x===i&&(a.x=0);a.y===i&&(a.y=0);a.min===i&&(a.min=1);a.max===i&&(a.max=6);a.step===i&&(a.step=1);a.width===i&&(a.width=2);a.Ea===i&&(a.Ea=q());a.H===i&&(a.H=10);a.sa===i&&(a.sa={x:0,y:0});a.fa===i&&(a.fa=1);for(var b=[],e=m,d=m,c={color:"black",blur:10,offset:[3,3],opacity:0.5},g=new E.Z(a.sa.x+(a.W+a.H),a.sa.y+(a.max/a.width-1)*(a.V+a.H),-(a.W+a.H),-(a.V+a.H),a.width),h=new Kinetic.Group({x:a.x,y:a.y}),f=a.min;f<=a.max;f+=a.step)(function(f){function n(b,c){c===i&&(c=m);if(!d)if(!c&&
e)a.Dc(f);else if(c||!e){h.Aa();a.Ea(f);w.attrs.image=a.xc;w.attrs.shadow=l}}var j=g.next(),j=new Kinetic.Group({x:j.x,y:j.y}),w=new Kinetic.Image({image:a.button,width:a.W,height:a.V,shadow:c}),o=new Kinetic.Image({image:a.Ga[f],scale:{x:a.fa,y:a.fa},offset:{x:a.Ga[f].width/2,y:a.Ga[f].height/2},x:a.W/2,y:a.V/2});j.on("mousedown touchstart",function(){n(0,m)});j.add(w);j.add(o);w.push=n;h.add(j);b[f]=w;b[f].kb=j})(f);h.pb=function(){for(var d=a.min;d<=a.max;d=d+a.step){b[d].attrs.image=a.button;
b[d].setShadow(c)}};h.Aa=function(){e=k};h.gd=function(){e=m};h.Pc=function(){d=k};h.pc=function(){d=m};h.Hc=function(a){return{x:h.getX()+b[a].kb.getX()+b[a].getWidth()/2,y:h.getY()+b[a].kb.getY()+b[a].getHeight()/2}};h.push=function(a){b[a].push(l,k)};return h};var Sb=Pb.extend({init:function(a,b,e){this._super(a,b,e,"TreeView");var d=this,c=1/2.083168317,g,h,f,p,n,j=[],w,o,r,v,u=l,F,y,x=0,I={},K,e=b.getHeight()-160,T=b.getHeight()-120,H={1:{x:100,y:40,rotation:-Math.PI/9},2:{x:100,y:100,rotation:Math.PI/11},3:{x:200,y:40,rotation:-Math.PI/12},4:{x:200,y:100,rotation:Math.PI/9}};d.zb=$a;d.yb=Za;d.Ab=bb;d.Bb=ab;d.Ia=cb;d.dd=db;d.bb=gb;d.ab=hb;d.cb=eb;d.eb=fb;d.tc=ib;h=new Rb({x:575,y:180,button:G.ka,xc:G.Kb,W:G.ka.width,V:G.ka.height,H:15,Dc:function(){d.$a(4E3);
P.play(za);d.setTimeout(function(){P.play(Ca);d.setTimeout(q(),2E3)},2E3)},Ea:function(b){a.ca()&&a.r(b)},Ga:{1:G.Nb,2:G.Ob,3:G.Pb,4:G.Qb,5:G.Rb,6:G.Sb},fa:0.75});h.Aa();o=new Kinetic.Layer;b.add(o);f=new Kinetic.s.Wb({x:244,y:580,scale:0.7*c});n=function(){p=d.setInterval(function(){j[a.Y()-1].cd(d)},4E3)};v=function(){d.clearInterval(p)};y=function(){u.Xc(a.Ca)};d.on("setPitcherLevelBefore",function(){d.a("setPitcherLevelSetDropOrigin",{x:j[a.Y()-1].getX(),y:j[a.Y()-1].getY()})});d.on("MG_LADDER_IGNORE_INPUT",
function(){h.Pc()});d.on(B,function(){h.pc()});d.on(C,function(){h.gd()});d.on("MG_LADDER_FORBID_GAMER_INPUT",function(){h.Aa()});F=function(b){u=j[a.Y()-1];d.setTimeout(function(){u.transitionTo({x:100,y:150,rotation:2*Math.PI,duration:1,callback:function(){u.setRotation(0);u.transitionTo({y:I[a.N()].getY()+25,rotation:2*Math.PI*(7-a.N()),duration:1,callback:function(){u.setRotation(0);b()}})}})},2E3)};d.gb=function(){u.Wc();v();u.open();h.pb();o.draw()};d.jb=function(a){var b=new Kinetic.Image({x:u.getX(),
y:u.getY(),image:G.Ib,width:128,height:128,offset:{x:64,y:64},scale:{x:0.1,y:0.1}});o.add(b);b.transitionTo({scale:{x:0.7,y:0.7},duration:0.5,callback:function(){b.transitionTo({x:b.getX()+50,y:200,duration:2,callback:a})}})};d.on(da,function(a){x+=1;F(a)});d.on("MG_LADDER_PICKED",function(b){a.b()&&!a.h()&&!a.f()?(d.wa(a.n()),d.$a(2E3),P.play(Da),d.setTimeout(function(){d.da(a.n(),b)},1500)):d.r(a.n(),b)});d.on("MG_LADDER_HELPER_APPROACH_TARGET",function(b){r=a.n();f.transitionTo({y:480,duration:2,
callback:function(){f.transitionTo({rotation:-Math.PI/8,x:219,duration:1,callback:function(){1<r?f.transitionTo({rotation:0,y:430,duration:1,callback:function(){2<r?(f.ja(),f.transitionTo({y:I[r].getY(),duration:0.5*r,callback:function(){f.P();b()}})):(f.P(),b())}}):b()}})}})});d.on("MG_LADDER_RESET_SCENE",function(b){var c=0;r!==a.N()&&(c=2E3);d.setTimeout(function(){function a(){f.transitionTo({rotation:0,x:244,y:580,duration:2,callback:function(){h.pb();b()}})}function c(a){f.transitionTo({rotation:-Math.PI/
16,x:244,y:510,duration:1,callback:function(){f.transitionTo({rotation:0,y:530,duration:1,callback:a})}})}2<r?(f.ja(),f.transitionTo({y:430,duration:0.5*r,callback:function(){f.P();c(a)}})):1<r?c(a):a()},c)});d.on("MG_LADDER_GET_TARGET",function(b){f.La(function(){function c(){e+=1;2===e&&b()}var e=0;u.transitionTo({x:u.getX()+55,y:u.getY()-40,duration:0.01,callback:function(){d.setTimeout(function(){P.play(jb);f.Ka(c);u.transitionTo({x:650+75*x,y:T,rotation:3*Math.PI,duration:2,callback:function(){u.setRotation(0);
c();a.b()||(y(),n())}})},200)}})})});d.G(function(){b.remove(o)});d.aa=function(){d.qb(f.attrs)};w=new Kinetic.Image({image:G.S,x:0,y:b.getHeight()-G.S.height,width:G.S.width,height:G.S.height});o.add(w);o.add(new Kinetic.Image({image:G.ec,x:145,y:161}));for(g=0;g<a.va().length;g+=1)w=a.va()[g],K=new Kinetic.Group({x:120,y:e-70*g}),I[w]=K;o.add(f);f.start();o.add(new Kinetic.Image({image:G.T,width:G.T.width,height:G.T.height,x:182,y:b.getHeight()-G.T.height}));this.r=function(b,c){P.play(ya);a.ba()&&
h.push(b);c()};this.wa=function(a){return h.Hc(a)};o.add(new Kinetic.Image({x:395,y:-100,image:G.Xb}));o.add(h);d.Ya(b.getWidth()-248,b.getHeight()-50,o);d.$=function(){for(g=0;3>g;g+=1)j[g].moveToTop()};d.z(function(){d.Za(o);var a;for(g=0;3>g;g+=1)a=new Kinetic.s.bc({x:H[g+1].x,y:H[g+1].y,rotation:H[g+1].rotation,type:g%3+1,scale:c}),o.add(a),j.push(a)});o.draw()}});var Cb,Tb={zd:{pe:{M:Nb,view:Sb,title:"Tree Game"},ie:{M:Nb,view:Qb,title:"Mountain Game"}}},Ub;for(Ub in Tb){var Vb=0,Y=Tb[Ub],Wb=[],Xb;for(Xb in Y)Wb.push(Y[Xb]),Y[Xb].yc=Y,Vb++;Y.Cb=Wb;Y.ed=Vb}Cb=Tb;window.onload=function(){new Yb};WebFontConfig={google:{families:["Nunito::latin","Doppio+One::latin","Nobile:400,700:latin","Galindo::latin"]}};var Zb=document.createElement("script");Zb.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js";Zb.type="text/javascript";Zb.async="true";var $b=document.getElementsByTagName("script")[0];$b.parentNode.insertBefore(Zb,$b);
function Yb(){console.log("Running game engine starter");console.log("Creating KineticJS stage");var a=new Kinetic.Stage({container:"container",width:1010,height:660});console.log("Creating basic KineticJS layers");var b=new Kinetic.Layer;a.add(b);var e=new Kinetic.Layer;a.add(e);var d=new Kinetic.Layer;a.add(d);a.oc=e;a.ua=function(){return e};a.De=function(){return b};a.Ie=function(){return d};a.Qe=q();console.log("Setting up game engine");var c=new Lb(a,k,k),g=c.m,h=new Kinetic.Text({text:"",fontFamily:"Arial",
textFill:"black",textStroke:"white",textStrokeWidth:1,fontSize:18,x:0,y:0}),f=k;g.on("TRIGGER_FPS",function(){f?(console.info("Turning off FPS display"),e.remove(h),f=m):(console.info("Turning on FPS display"),e.add(h),f=k)},"game");e.add(h);(new Kinetic.Animation({func:function(b){g.a("frame",{frame:b});e.draw();a.mc&&(d.draw(),a.mc=m);Tween.tick(b.timeDiff,m)},node:e})).start();g.on("Game.miniGameListenersInitiated Game.viewInitiated",function(){e.moveToTop();d.moveToTop()},"game");console.log("Showing welcome screen");
g.a("Game.showLoadingScreen",{time:2E3});setTimeout(function(){g.a("Game.loadingSounds");var b=l,d=l;console.log("Downloading sound files");var e=new PreloadJS(m);e.onComplete=function(){clearInterval(b);d=setInterval(function(){g.a("Game.updateImageLoading",{progress:M.Kc()})},50);g.a("Game.loadingImages");M.Tc(function(){console.log("Downloading image files");clearInterval(d);g.a("Game.updateImageLoading",{progress:1});setTimeout(function(){g.a("Game.loadingDone");console.log("Starting game engine");
c.start()},1E3)})};e.installPlugin(SoundJS);b=setInterval(function(){g.a("Game.updateSoundLoading",{progress:e.progress})},50);P.bd(a);g.on("TRIGGER_SUBTITLES",function(){P.fd()},"game");e.loadManifest(P.Lc())},2E3)};