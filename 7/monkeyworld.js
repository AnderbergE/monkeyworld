var i=void 0,k=!0,l=null,o=!1;function p(){return function(){}}function s(a){return function(){return this[a]}}function t(a){return function(){return a}}var A;Kinetic.s={};var ca=new function(){var a={},b=[],d=0;this.Ab=t("GameEventManager");this.on=function(b,c,d){for(var b=b.split(" "),g=0;g<b.length;g++)b[g]in a||(a[b[g]]=[]),a[b[g]].push(c),c.B=d};this.off=function(b,c){for(var d=0;d<a[b].length;d++)a[b][d].B===c&&a[b].splice(d,1);0==a[b].length&&delete a[b]};this.print=function(){console.log("-------EVENT MANAGER STATE-----------------");for(var b in a){console.log("key: "+b);for(var c=0;c<a[b].length;c++)console.log("   "+a[b][c].B)}console.log("-------------------------------------------")};
this.$e=function(b){if(b in a)for(var c=0;c<a[b].length;c++)console.log(a[b][c].B+" listens to "+b)};this.K=function(b){var c=0,d;for(d in a){for(var g=a[d].length,f=0;f<g;f++)a[d][f].B===b&&(a[d].splice(f,1),f--,g--,c++);0==a[d].length&&delete a[d]}};this.a=function(e,c,h){d++;e=a[e];if(e!=i)for(var g=0;g<e.length;g++){var f=e[g];h!=i&&h&&console.log("  Observer: "+e[g].B);f(c)}d--;if(0==d&&0<b.length){for(g=0;g<b.length;g++)this.K(b[g]);b=[]}};this.ub=function(b,c,h,g){d++;h=a[h];if(h!=i)for(var f=
0;f<h.length;f++){var m=h[f];console.log("  Observer: "+h[f].B);m(b,g);c||b()}d--};this.k=function(a,b,d){this.ub(b,k,a,d)}};var da="MG_LADDER_PLACE_TARGET",ea="MG_LADDER_ALLOW_INTERRUPT",fa="MG_LADDER_READY_TO_PICK",ga="MG_LADDER_CHEER",B="MG_LADDER_ACKNOWLEDGE_INPUT",C="MG_LADDER_ALLOW_GAMER_INPUT";var ha=Class.extend({init:function(a){this.e=a;this.l=ca},on:function(a,b,d){this.l.on(a,b,d===i?this.e:d)},off:function(a,b){this.l.off(a,b===i?this.e:b)},K:function(a){this.l.K(a===i?this.e:a)},a:function(a,b,d){d!=i&&d&&console.log(this.e+": "+a);this.l.a(a,b,d)},k:function(a,b,d){console.log(this.e+": "+a);this.l.k(a,b,d)},qb:function(a,b,d){var e=this;return function(c){console.log(e.e+": "+b);e.l.ub(c,a,b,d)}},pb:function(a,b){return this.qb(o,a,b)},Q:function(a,b){return this.qb(k,a,b)},Ab:function(){console.log(this.l.Ab())},
tb:function(a){this.e=a},Ue:function(a){this.l=a},Me:s("e")});function ia(){var a=[];this.lb=function(b){a.push(b)};this.W=function(b){var d=b-1;if(0>d||d>=a.length)throw"MonkeyWorld.NoSuchRoundException ("+b+")";return a[d]}}function ja(){var a=o,b=[];this.Ea=function(){console.log("Mistake reported");a=k};this.kb=function(){return a};this.Xc=function(a){b.push(a)};this.Ca=function(){b.splice(b.length-1)};this.Bc=function(){return b}}
function ka(){this.lb=function(){throw"MonkeyWorld.NoMiniGameResultException";};this.W=function(){throw"MonkeyWorld.NoMiniGameResultException";}};function la(){var a=[];this.setTimeout=function(b,d){var e=setTimeout(b,d);a.push(e);return e};this.setInterval=function(b,d){var e=setInterval(b,d);a.push(e);return e};this.clearTimeout=function(b){a.remove(b);clearTimeout(b)};this.clearInterval=function(b){a.remove(b);clearInterval(b)};this.Ia=function(){for(var b=0;b<a.length;b++)clearTimeout(a[b]);delete a;a=[]}}
var oa=ha.extend({init:function(a){this._super(a);this.I=new la;this.F=[];this.D=[]},z:function(a){this.F.push(a)},j:function(){if(this.F===l)throw{name:"MW.TearDownAlreadyCalledException",message:"This module ("+this.e+") has already been teared down."};this.I.Ia();this.K();for(var a=0;a<this.F.length;a++)this.F[a](),this.F[a]=l;this.F=l},p:function(a){this.D.push(a)},n:function(){if(this.D===l)throw{name:"MW.SetupAlreadyCalledException",message:"This module ("+this.e+") has already been setted up."};
for(var a=0;a<this.D.length;a++)this.D[a](),this.D[a]=l;this.D=l},setTimeout:function(a,b){return this.I.setTimeout(a,b)},setInterval:function(a,b){return this.I.setInterval(a,b)},clearTimeout:function(a){this.I.clearTimeout(a)},clearInterval:function(a){this.I.clearInterval(a)}});Object.size=function(a){var b=0,d;for(d in a)a.hasOwnProperty(d)&&b++;return b};
var pa=new function(){function a(a,d,e,c){var h=console;e===i?e="":"string"!==typeof e&&(e="");if("evm"!=e&&"sound"!=e){for(var e=e.substr(0,8),e=e.toUpperCase(),g=8-e.length,f=0;f<g;f++)e=" "+e;c.call(h,a+" "+e+" "+d)}}this.debug=function(b,d){a("DEBUG  ",b,d,console.debug)};this.Ze=function(b,d){a("WARNING",b,d,console.warn)};this.Tc=function(b){a("NOTIFY ",b,"sound",console.info)};this.error=function(b,d){a("ERROR  ",b,d,console.error)}};
Array.prototype.remove=function(a){for(var b=0;b<this.length;b++)this[b]===a&&this.splice(b)};
var E=new function(){function a(a,d,e,c,h){var g=0,f=0;this.next=function(){var m=a+g*e,n=d+f*c;g=(g+1)%h;0==g&&f++;return{x:m,y:n}}}this.Ne=function(a){return!isNaN(a-0)};this.sa=function(a){var d=arguments;return function(a){var b,h=[],g=l,f=k;for(b=0;b<d.length;b+=1)h.push(d[b]);g=function(b){f&&(b=a,f=o);var c=h.shift();c!=i&&c(g,b)};g()}};this.we=function(a,d,e,c,h){var g=new function(){var a,b;a===i&&(a=0);b===i&&(b=0);return{x:a,y:b}};g.x=d.x*a*a*a+e.x*3*a*a*(1-a)+c.x*3*a*(1-a)*(1-a)+h.x*(1-
a)*(1-a)*(1-a);g.y=d.y*a*a*a+e.y*3*a*a*(1-a)+c.y*3*a*(1-a)*(1-a)+h.y*(1-a)*(1-a)*(1-a);return g};this.Se=function(a,d){a.x!=i&&(a.x*=d);a.y!=i&&(a.y*=d);a.width!=i&&(a.width*=d);a.height!=i&&(a.height*=d);a.fontSize!=i&&(a.fontSize*=d);if(a.scale!=i&&(a.scale.x!=i&&(a.scale.x*=d),a.scale.y!=i))a.scale.y*=d;return a};this.q=function(a,d){return Math.floor(Math.random()*(d-a+1))+a};this.ya=function(a,d){for(var e=0;e<a.length;e++)if(a[e]===d)return k;return o};this.Y=function(b,d,e,c,h){return new a(b,
d,e,c,h)};this.ye=function(a,d,e,c,h,g){5==arguments.length&&(g=o);for(var f=Array(e),m=Array(h),n=0;n<h;n++){for(var j=this.q(0,e-1);this.ya(m,j);)j=this.q(0,e-1);m.push(j)}for(n=0;n<e;n++)if(this.ya(m,n))f[n]=c;else if(f[n]=this.q(a,d),g)for(;f[n]==c;)f[n]=this.q(a,d);return f}};Kinetic.nd=function(a){var b=new Kinetic.Group({x:a.x,y:a.y,width:a.width,height:a.height}),d=new Kinetic.Rect({x:0,y:0,width:a.width,height:a.height,fill:"#ccc",strokeWidth:1,stroke:"white"}),e=new Kinetic.Text({text:a.text,fontFamily:"Arial",textFill:"black",fontSize:a.fontSize,x:a.width/2,y:a.height/2,verticalAlign:"middle",align:"center"});b.add(d);b.add(e);b.on("mousedown touchstart",a.callback);return b};var qa={Fb:"balloons.png",Gb:"yesno/no-sprite.png",Ib:"yesno/yes-sprite.png",Sb:"Jungle_Bkg.png",Qb:"bg-garden.png",Rb:"bg-sadgarden.png",R:"minigames/treegame/background.png",bc:"minigames/treegame/treedots.png",S:"minigames/treegame/lizard_cover.png",$b:"minigames/treegame/lizard/lizard-sprite.png",ac:"minigames/treegame/lizard/tongue-sprite.png",Ub:"minigames/treegame/nrpad.png",Wb:"minigames/treegame/paket-1.png",Xb:"minigames/treegame/paket-2.png",Yb:"minigames/treegame/paket-3.png",ja:"buttons/wood.png",
Hb:"buttons/wood-selected.png",Kb:"numbers/dots/prick-1.png",Lb:"numbers/dots/prick-2.png",Mb:"numbers/dots/prick-3.png",Nb:"numbers/dots/prick-4.png",Ob:"numbers/dots/prick-5.png",Pb:"numbers/dots/prick-6.png",T:"vattendroppe.png",o:"vattenkanna.png",la:"vattenkanna-botten.png",Eb:"agents/mouse/body-sprite.png",Cb:"agents/mouse/facials-sprite.png",Bb:"agents/mouse/blink-sprite.png",Db:"agents/mouse/pointat-sprite.png"},G={},M={},ra=0,sa=0,ta;for(ta in G)ra++;M.Gc=function(){return sa};
M.Qc=function(a){var b=0,d=Object.size(qa),e;for(e in qa){var c=qa[e];G[e]=new Image;G[e].onload=function(){++b>=d&&a();sa=b/ra};G[e].src="../res/img/"+c}};var N,ua={INIT_LOADING_SOUNDS:{sv:"Laddar ner ljud...",en:"Downloading sounds..."},INIT_LOADING_IMAGES:{sv:"Laddar ner bilder...",en:"Downloading images..."},RESTART:{sv:"Starta om",en:"Restart"},SETTINGS:{sv:"Inst\u00e4llningar",en:"Settings"},YAY:{sv:"Hurra!",en:"Yay!"},INTRO_1:{sv:"Hej! De h\u00e4r v\u00e4nnerna beh\u00f6ver din hj\u00e4lp",en:"Hello! These friends need your help"},INTRO_2:{sv:"med att f\u00e5 deras tr\u00e4dg\u00e5rd att v\u00e4xa.",en:"to make their garden grow."},INTRO_3:{sv:"Om du kan l\u00e4ra din v\u00e4n hur man spelar spelen",
en:"If you can teach your friend how to do the games"},INTRO_4:{sv:"kan han eller hon samla vattendroppar -",en:"he or she can collect water drops -"},INTRO_5:{sv:"- f\u00f6r att f\u00e5 deras tr\u00e4dg\u00e5rd att v\u00e4xa -",en:"- to make their garden grow again -"},INTRO_GARDEN_1:{sv:"- fr\u00e5n det h\u00e4r...",en:"- from this..."},INTRO_GARDEN_2:{sv:"...till det h\u00e4r!",en:"...to this!"},CHOOSE_YOUR_FRIEND:{sv:"B\u00f6rja med att v\u00e4lja vilken v\u00e4n du vill hj\u00e4lpa!",en:"First, choose the friend you would like to teach!"},
THANKS_FOR_CHOOSING_ME:{sv:"Ja! Tack f\u00f6r att du valde mig!",en:"Yay! Thanks for choosing me!"},ARE_YOU_READY_TO_TEACH:{sv:"\u00c4r du redo att l\u00e4ra apan?",en:"Are you ready to teach monkey?"},SYSTEM_FIRST_YOU_PLAY:{sv:"F\u00f6rst \u00e4r det du som spelar spelet!",en:"First, you play the game!"},SYSTEM_WELL_DONE:{sv:"Bra gjort!",en:"Well done!"},SYSTEM_TIME_TO_TEACH_FRIEND:{sv:"Nu \u00e4r det dags att l\u00e4ra din v\u00e4n hur man g\u00f6r!",en:"Now it's time to teach your friend!"},NO_MY_TURN:{sv:"Gl\u00f6m inte att det \u00e4r MIN tur nu!",
en:"Remember it\u2019s MY turn now!"},BUT_YOU_CAN_INTERRUPT:{sv:"Men du kan avbryta mig om jag g\u00f6r fel.",en:"But you can interrupt me if I'm making a mistake."},AGENT_BUCKET_IS_FULL:{sv:"Hurra! Nu \u00e4r min kanna full och vi kan bes\u00f6ka min tr\u00e4dg\u00e5rd!",en:"Wow! Now my bucket is full and we are ready to visit my garden!"},AGENT_NEED_MORE_WATER:{sv:"Jag beh\u00f6ver mer vatten till tr\u00e4dg\u00e5rden!",en:"I still need more water to fix my garden!"},AGENT_LETS_KEEP_PLAYING:{sv:"Vi forts\u00e4tter spela.",
en:"Let\u2019s keep playing."},MAYBE_THAT_WORKS:{sv:"Okej, vi testar och ser om det \u00e4r r\u00e4tt.",en:"OK, let's see if this works."},YAY_HELPED_ME_GET_WATER_DROP_1:{sv:"Hurra! Du hj\u00e4lpte mig att f\u00e5 en vattendroppe",en:"Yay! You helped me get a water drop"},YAY_HELPED_ME_GET_WATER_DROP_2:{sv:"till min tr\u00e4dg\u00e5rd, s\u00e5 den kan v\u00e4xa!",en:"for my garden to grow again!"},YAY_HELPED_ME_GET_WATER:{sv:"Hurra! Tack f\u00f6r hj\u00e4lpen! Nu fick jag lite vatten till min tr\u00e4dg\u00e5rd!",
en:"Woo! Thank you for helping me! Now I have some water for my garden!"},LETS_FILL_THE_BUCKET:{sv:"Kom igen och fyll kannan!",en:"Let's fill the bucket!"},WHICH_ONE_DO_YOU_THINK_IT_IS:{sv:"Vilken tror du att det \u00e4r?",en:"Which one do you think it is?"},YES_I_THINK_THAT_ONE_IS_BETTER:{sv:"Ja, det d\u00e4r fungerar nog b\u00e4ttre!",en:"Yes, I think that one is better!"},LADDER_TREE_BETTER_BECAUSE_BIGGER:{sv:"Ja, det verkar vara ett bra val, eftersom den \u00c4R st\u00f6rre!",en:"Yes, that seems to be a good choice because it IS bigger!"},
LADDER_TREE_BETTER_BECAUSE_SMALLER:{sv:"Ja, det verkar vara ett bra val, eftersom den \u00c4R mindre!",en:"Yes, that seems to be a good choice because it IS smaller!"},IM_GOING_TO_PICK_THIS_ONE:{sv:"Okej, f\u00e5r se om den h\u00e4r fungerar. Hmm...",en:"Ok, let's see if this works. Hmm..."},LADDER_LOOKS_FUN:{sv:"Det d\u00e4r s\u00e5g kul ut!",en:"That looked fun!"},LADDER_SHOW_ME:{sv:"Visa mig hur man g\u00f6r!",en:"Now show me how to do it!"},LADDER_MY_TURN:{sv:"Okej, nu ska vi se om jag klarar det h\u00e4r sj\u00e4lv!",
en:"Ok, now let's see if I can do this on my own!"},LADDER_IS_IT_RIGHT:{sv:"G\u00f6r jag r\u00e4tt eller fel?",en:"Am I doing it right or wrong?"},LADDER_IT_WAS_RIGHT:{sv:"Ja! Du fick presenten!",en:"Yeah! You got it!"},LADDER_TREE_OOPS_TOO_HIGH:{sv:"Oj, kanske tog vi i f\u00f6r mycket!",en:"Oops! Maybe we overdid it!"},LADDER_TREE_OOPS_TOO_LOW:{sv:"Hmm... Kanske var det inte tillr\u00e4ckligt!",en:"Hmm... Maybe it wasn't enough!"},LADDER_TREE_TRY_A_SMALLER_NUMBER:{sv:"Vi kan v\u00e4l testa en mindre och se vad som h\u00e4nder!",
en:"Let's try a smaller one and see what happens!"},LADDER_TREE_TRY_A_BIGGER_NUMBER:{sv:"Vad tror du? Ska vi testa en st\u00f6rre?",en:"What do you think? Shall we try a bigger one?"},LADDER_TREE_AGENT_PLAY_TOO_LOW:{sv:"Hmm, det gick inte. Jag undrar varf\u00f6r. Jag testar en st\u00f6rre!",en:"Hmm, that didn't work. I wonder why. Let me try a bigger one!"},LADDER_TREE_AGENT_PLAY_TOO_HIGH:{sv:"\u00c5h, nej! Var den f\u00f6r stor?",en:"Oh no! Was that too big?"},LADDER_TREE_AGENT_SEE_CORRECT:{sv:"WOO! Tack f\u00f6r hj\u00e4lpen! Vilken fin present!",
en:"WOO! Thank you for helping me! What a great surprise!"},LADDER_TREE_AGENT_SUGGEST_SOLUTION_1:{sv:"Kanske kan vi f\u00f6rs\u00f6ka med samma siffra p\u00e5",en:"Maybe we should match the number on"},LADDER_TREE_AGENT_SUGGEST_SOLUTION_2:{sv:"nummerplattan som vid presenten?",en:"the number pad to the number by the gift?"},LADDER_PLEASE_HELP_ME:{sv:"Kan du hj\u00e4lpa mig att v\u00e4lja r\u00e4tt?",en:"Can you please help me find the right one?"},LADDER_MOUNTAIN_IM_DOWN_HERE:{sv:"Jag \u00e4r h\u00e4r nere!",
en:"I'm down here!"},LADDER_MOUNTAIN_IM_UP_HERE:{sv:"Jag \u00e4r h\u00e4r uppe!",en:"I'm up here!"},LADDER_MOUNTAIN_YOU_SAVED_ME:{sv:"Du r\u00e4ddade mig!!!",en:"You saved me!!!"},LADDER_MOUNTAIN_IM_HUNGRY:{sv:"Jag \u00e4r hungrig. Kom s\u00e5 g\u00e5r vi och \u00e4ter!",en:"I'm hungry. Let's go eat!"},LADDER_MOUNTAIN_TRY_FEWER_BALLOONS:{sv:"Kanske ska vi testa med f\u00e4rre ballonger?",en:"Perhaps we should try with fewer balloons?"},LADDER_MOUNTAIN_TRY_MORE_BALLOONS:{sv:"Vi kan v\u00e4l testa med fler ballonger och se vad som h\u00e4nder?",
en:"Let's try with more balloons and see what happens!"},LADDER_MOUNTAIN_AGENT_SUGGEST_SOLUTION_1:{sv:"Kanske kan vi f\u00f6rs\u00f6ka med lika m\u00e5nga ballonger",en:"Maybe we should match the number of balloons"},LADDER_MOUNTAIN_AGENT_SUGGEST_SOLUTION_2:{sv:"som niv\u00e5er upp din v\u00e4n \u00e4r.",en:"to the level your friend is stuck on."},LADDER_MOUNTAIN_AGENT_PLAY_TOO_LOW:{sv:"Oj, det kanske var f\u00f6r f\u00e5 ballonger.",en:"Oops, maybe I used to few balloons."},LADDER_MOUNTAIN_AGENT_PLAY_TOO_HIGH:{sv:"Hoppsan, det var nog f\u00f6r m\u00e5nga ballonger!",
en:"Oops, I think there were too many balloons!"},LADDER_MOUNTAIN_BETTER_BECAUSE_BIGGER:{sv:"Ja, det fungerar nog, f\u00f6r det \u00c4R fler ballonger!",en:"Yes, this can work, beacuse that IS more ballons!"},LADDER_MOUNTAIN_BETTER_BECAUSE_SMALLER:{sv:"Ja, det fungerar nog, f\u00f6r det \u00c4R f\u00e4rre ballonger!",en:"Yes, this will probably work, beacuse that IS fewer balloons!"},LADDER_MOUNTAIN_AGENT_SEE_CORRECT:{sv:"WOO! Tack f\u00f6r hj\u00e4lpen! Vi r\u00e4ddade v\u00e5r v\u00e4n!",en:"WOO! Thank you for helping me! We saved our friend!"},
NUMBER_1:{sv:"nummer 1",en:"number 1"},NUMBER_2:{sv:"nummer 2",en:"number 2"},NUMBER_3:{sv:"nummer 3",en:"number 3"},NUMBER_4:{sv:"nummer 4",en:"number 4"},NUMBER_5:{sv:"nummer 5",en:"number 5"},NUMBER_6:{sv:"nummer 6",en:"number 6"},NUMBER_7:{sv:"nummer 7",en:"number 7"},NUMBER_8:{sv:"nummer 8",en:"number 8"},NUMBER_9:{sv:"nummer 9",en:"number 9"},NUMBER_10:{sv:"nummer 10",en:"number 10"}};
N={get:function(a,b){if(ua[a]===i)return l;for(var d=ua[a].en,e=1;e<arguments.length;e++)d=d.replace("%"+e,arguments[e]);return d}};function O(a,b,d){this.ha=a;this.sb=b;this.Ua=b!=l;this.jb=d;this.Le=s("sb");this.Ye=s("Ua")}
var va=new O("19446__totya__yeah","YAY"),wa=new O("27882__stickinthemud__bike-horn-double-toot",l),xa=new O("60443__jobro__tada1",l),ya=new O("406__tictacshutup__click-1-d",l,4),za=new O(l,"NO_MY_TURN"),Aa=new O(l,"CHOOSE_YOUR_FRIEND"),Ba=new O(l,"THANKS_FOR_CHOOSING_ME"),Ca=new O(l,"BUT_YOU_CAN_INTERRUPT"),Da=new O(l,"IM_GOING_TO_PICK_THIS_ONE"),Ea=new O(l,"MAYBE_THAT_WORKS"),Fa=new O(l,"YAY_HELPED_ME_GET_WATER_DROP_1"),Ga=new O(l,"YAY_HELPED_ME_GET_WATER_DROP_2"),Ha=new O(l,"YAY_HELPED_ME_GET_WATER"),
Ia=new O(l,"LETS_FILL_THE_BUCKET"),Ja=new O(l,"WHICH_ONE_DO_YOU_THINK_IT_IS"),Ka=new O("25879__acclivity__drip1",l),La=new O(l,"INTRO_1"),Ma=new O(l,"INTRO_2"),Na=new O(l,"INTRO_3"),Oa=new O(l,"INTRO_4"),Pa=new O(l,"INTRO_5"),Qa=new O(l,"INTRO_GARDEN_1"),Ra=new O(l,"INTRO_GARDEN_2"),Sa=new O(l,"SYSTEM_FIRST_YOU_PLAY"),Ta=new O(l,"SYSTEM_WELL_DONE"),Ua=new O(l,"SYSTEM_TIME_TO_TEACH_FRIEND"),Va=new O(l,"LADDER_LOOKS_FUN"),Wa=new O(l,"LADDER_SHOW_ME"),Xa=new O(l,"LADDER_MY_TURN"),Ya=new O(l,"LADDER_PLEASE_HELP_ME"),
Za=new O(l,"LADDER_TREE_OOPS_TOO_HIGH"),$a=new O(l,"LADDER_TREE_OOPS_TOO_LOW"),ab=new O(l,"LADDER_TREE_TRY_A_SMALLER_NUMBER"),bb=new O(l,"LADDER_TREE_TRY_A_BIGGER_NUMBER"),cb=new O(l,"LADDER_TREE_AGENT_SUGGEST_SOLUTION_1"),db=new O(l,"LADDER_TREE_AGENT_SUGGEST_SOLUTION_2"),eb=new O(l,"LADDER_TREE_BETTER_BECAUSE_BIGGER"),fb=new O(l,"LADDER_TREE_BETTER_BECAUSE_SMALLER"),gb=new O(l,"LADDER_TREE_AGENT_PLAY_TOO_LOW"),hb=new O(l,"LADDER_TREE_AGENT_PLAY_TOO_HIGH"),ib=new O(l,"LADDER_TREE_AGENT_SEE_CORRECT"),
jb=new O("34208__acclivity__tongueclick1",l),kb=new O(l,"LADDER_MOUNTAIN_IM_DOWN_HERE"),lb=new O(l,"LADDER_MOUNTAIN_IM_UP_HERE"),mb=new O(l,"LADDER_MOUNTAIN_TRY_FEWER_BALLOONS"),nb=new O(l,"LADDER_MOUNTAIN_TRY_MORE_BALLOONS"),ob=new O(l,"LADDER_MOUNTAIN_AGENT_SUGGEST_SOLUTION_1"),pb=new O(l,"LADDER_MOUNTAIN_AGENT_SUGGEST_SOLUTION_2"),qb=new O(l,"LADDER_MOUNTAIN_BETTER_BECAUSE_BIGGER"),rb=new O(l,"LADDER_MOUNTAIN_BETTER_BECAUSE_SMALLER"),sb=new O(l,"LADDER_MOUNTAIN_AGENT_PLAY_TOO_LOW"),tb=new O(l,
"LADDER_MOUNTAIN_AGENT_PLAY_TOO_HIGH"),ub=new O(l,"LADDER_MOUNTAIN_AGENT_SEE_CORRECT"),vb=new O(l,"LADDER_MOUNTAIN_YOU_SAVED_ME"),wb=new O(l,"LADDER_MOUNTAIN_IM_HUNGRY"),xb={re:va,ld:wa,ne:xa,pd:ya,je:za,od:Aa,oe:Ba,md:Ca,rd:Da,ve:new O(l,"YES_I_THINK_THAT_ONE_IS_BETTER"),ge:Ea,te:Fa,ue:Ga,se:Ha,fe:Ia,qe:Ja,he:new O(l,"MONKEY_HMM"),qd:Ka,sd:La,td:Ma,ud:Na,vd:Oa,wd:Pa,xd:Qa,yd:Ra,ke:Sa,me:Ta,le:Ua,hd:new O(l,"AGENT_BUCKET_IS_FULL"),kd:new O(l,"AGENT_NEED_MORE_WATER"),jd:new O(l,"AGENT_LETS_KEEP_PLAYING"),
Dd:Va,Td:Wa,Rd:Xa,Bd:new O(l,"LADDER_IS_IT_RIGHT"),Cd:new O(l,"LADDER_IT_WAS_RIGHT"),Sd:Ya,Ad:new O(l,"LADDER_AGENT_HELP_IN_INTERRUPT"),ae:Za,be:$a,ee:ab,de:bb,Xd:cb,Yd:db,Zd:eb,$d:fb,Vd:gb,Ud:hb,Wd:ib,ce:jb,Ld:kb,Nd:lb,Od:mb,Pd:nb,Hd:ob,Id:pb,Jd:qb,Kd:rb,Fd:sb,Ed:tb,Gd:ub,Qd:vb,Md:wb,NUMBER_1:new O(l,"NUMBER_1"),NUMBER_2:new O(l,"NUMBER_2"),NUMBER_3:new O(l,"NUMBER_3"),NUMBER_4:new O(l,"NUMBER_4"),NUMBER_5:new O(l,"NUMBER_5"),NUMBER_6:new O(l,"NUMBER_6"),NUMBER_7:new O(l,"NUMBER_7"),NUMBER_8:new O(l,
"NUMBER_8"),NUMBER_9:new O(l,"NUMBER_9"),NUMBER_10:new O(l,"NUMBER_10")},P={},yb=l,Q=l,R=[],S=l,U=k;P.ad=function(a){yb=a;Q=yb.lc};P.Hc=function(){if(S===l){S=[];for(var a in xb){var b=xb[a];xb[a].Ra=a;if(b.ha!=l){var d=l,d="../res/sound/",d={id:a,src:d+b.ha+".ogg|../res/sound/"+b.ha+".mp3"};b.jb!=i&&(d.data=b.jb);S.push(d)}}}return S};
P.play=function(a){var b=a.sb;pa.Tc('"'+b+'"');if(U&&a.Ua){for(var d=new Kinetic.Text({x:0,y:Q.getParent().attrs.height-50,text:N.get(b),fontSize:20,fontFamily:"Nobile",textFill:"white",textStroke:"black",align:"center",fontStyle:"bold",width:Q.getParent().getWidth(),height:50,verticalAlign:"middle",textStrokeWidth:2}),b=0;b<R.length;b++)R[b].attrs.y-=30;R.push(d);Q.add(d);setTimeout(function(){Q.remove(d);for(var a=0;a<R.length;a++)R[a]===d&&R.splice(a,1)},3E3)}a.ha!=l&&SoundJS.play(a.Ra)};
P.stop=function(a){SoundJS.stop(a.Ra)};P.fd=function(){U?(U=o,console.info("Turning off subtitles")):(U=k,console.info("Turning on subtitles"))};function V(){};var zb=oa.extend({init:function(a){this._super("AgentChooser");this.Na=[{Aa:V,view:W},{Aa:V,view:W},{Aa:V,view:W},{Aa:V,view:W}];this.ic=a},Ce:s("Na"),vc:function(a){this.ic(a)}});var Lb=ha.extend({init:function(a,b,d,e){function c(c){if(b){var d=new Ab(a,j);d.n();j.a("Game.viewInitiated");j.a("Game.demonstrateGarden",{callback:function(){d.j();c()}})}else c()}function h(){j.a("Game.stopMiniGame");b&&T.j();x.stop();x.j();delete x;J=0;x=l;j.a("miniGameDone")}function g(){function c(){if("Monkey Do"===y){var a=Z.W(aa).Bc();x.play(D,a)}else x.play(D);j.a("miniGameStarted",{})}H();x.n();b&&(K=new I(x,a,ba),K.n(),j.a("Game.miniGameListenersInitiated"));j.a("miniGameInitiated",{});
b?j.k("INTRODUCE_MODE",function(){j.k("INTRODUCE_AGENT",function(){c()})}):c()}function f(){function c(){b&&(T=new Bb(a,j),T.n());m(0);g()}Z=new ia;D=r;y="Child Play";if(0<z.length){var d=z[0];z.splice(0);var f=d.Ec();ma=f;H=function(){x=new f.L(j);I=f.view};c();n(d.Fc())}else e===i&&j.a("Game.showMiniGameChooser",{callback:function(a){ma=a;H=function(){j.a("Game.hideMiniGameChooser");x=new a.L(j);I=a.view};c();n(w)},Ac:Cb})}function m(a){J=a;j.a("backendScoreGameUpdateMiniGame",{$c:J})}function n(a){j.a("learningTrackUpdate",
{Pc:a})}this._super("Game");var j=this;this.l=ca;this.We=a;this.L=this;A=function(a,b){this.Ec=function(){return a};this.Fc=function(){return b}};var u=new ka,r=new Db,q=new Eb,w=new Fb,v=new Gb,F=new Hb,y="Child Play",x=l,I=l,K=l,T=l,H=l,D=r,aa=1,Z=u,J=0,ma=l,L=0,na=0,ba=l,z=[];e!=i&&z.push(new A(e,w));b===i&&(b=k);d===i&&(d=k);b&&new Ib(a);this.Rc=function(){if(x===l)throw{name:"MonkeyWorld.NoActiveMiniGameException",message:"There is no active minigame"};b&&K.j();m(J+x.Cc());if("Child Play"===
y)y="Monkey See",g();else if("Monkey See"===y){var a=x.W();Z.lb(a);y="Monkey Do";D=q;g()}else if("Monkey Do"===y){aa=1;y="Child Play";D=r;h();var a=ma,c=J;if(26<c&&30>=c)z.push(new A(a,F)),z.push(new A(a,F));else if(22<c&&26>=c)z.push(new A(a,v)),z.push(new A(a,v)),z.push(new A(a,v));else if(0<=c&&22>=c)z.push(new A(a,w)),z.push(new A(a.uc.zb[0],w)),z.push(new A(a,w)),z.push(new A(a,w)),z.push(new A(a,w));else throw"MW.NoSuchMinigameScore";f()}};this.He=function(){return y};this.Je=function(){return aa};
this.Ke=function(){return J};this.Be=function(){return ba};this.start=function(){function e(){d?(g=new zb(function(a){g.j();h!=l&&h.j();ba=a.view;f()}),b&&(h=new Jb(a,g),h.n(),j.a("Game.viewInitiated"))):(ba=W,f())}var g=l,h=l;if(b){var n=new Kb(a,function(a){a?(n.j(),e()):(n.j(),c(e))});n.n();j.a("Game.viewInitiated")}else c(e)};this.stop=function(){h();y="Child Play";aa=1;D=r;Z=u;this.a("Game.stop")};this.Qe=function(){this.stop();this.start()};this.qa=function(c){j.a("setPitcherLevelBefore");j.a("setPitcherLevel",
{callback:function(){if(6===L){var d=function(){na+=L;L=0;j.a("resetPitcherLevel");e.j();j.a("Game.gardenWatered");c!=i&&c()};if(b){var e=new Ab(a,j);e.n();j.a("Game.waterGarden",{callback:function(){d()}})}else d()}else c!=i&&c()}});L+=1};this.Ic=function(){return L};this.Ee=function(){return na};this.Ge=function(){return x};this.fa=function(){D=q};this.ga=function(){D=r};this.ba=function(){return D===r};this.aa=function(){return D===q};this.N=function(){return"Child Play"===y};this.A=function(){return"Monkey See"===
y};this.b=function(){return"Monkey Do"===y}}});function Hb(){}Hb.prototype.name=t("Fast");function Gb(){}Gb.prototype.name=t("Medium");function Fb(){}Fb.prototype.name=t("Regular");var Mb=ha.extend({init:function(a){this._super(a)}});var Eb=Mb.extend({init:function(){this._super("AgentPlayer");var a=this;this.P={};this.P.Ladder=function(b,d){function e(a){h||(f++,setTimeout(function(){a===g||"incorrect"===d[a]?b.r(b.gb()):b.r(b.M())},2E3))}var c=0,h=o,g=E.q(0,d.length-1),f=0;a.on(fa,function(){e(c++)});a.on("Ladder.incorrect",function(){b.h()||(4>f?e(c++):4===f&&!b.f()&&(P.play(Ya),b.Jc()))});a.on("Ladder.correct",function(){f=0});this.$=function(){h=k;f=0};this.resume=function(){h=o};a.on("MG_LADDER_HAS_TARGET",function(){setTimeout(function(){b.Ba()},
1500)});a.on("Game.stopMiniGame",function(){a.K()})}}});var Db=Mb.extend({init:function(){this._super("GamerPlayer");this.tb("GamerPlayer");this.P=p();this.P.Ladder=p()}});var Nb=oa.extend({init:function(a,b){this._super(b);this.u=a;this.Yc=a.Rc;var d=this;this.Sa=o;this.na=[];this.Ta=o;this.oa=[];var e=l,c=10,h=l;this.Va=function(a){e.Xc(a)};this.Ca=function(){e.Ca()};this.oc=function(a){this.na.push(a)};this.pc=function(a){this.oa.push(a)};this.Ea=function(){0<c&&(c--,d.a("backendScoreUpdateMode",{$a:c},k));e.Ea()};this.kb=function(){return e.kb()};this.W=function(){return e};this.Cc=function(){return c};this.Re=p();this.play=function(a,b){c=10;d.a("backendScoreUpdateMode",
{$a:c},k);e=new ja;a.P[this.e]!==i&&(h=new a.P[this.e](this,b));d.start()};var g=o,f=o,m=[];this.Nc=function(){g=k;h!==i&&h!==l&&(h.$(),d.ga());for(var a=0;a<m.length;a+=1)m[a]()};this.nc=function(a){m.push(a)};this.Zc=function(){g=o;d.fa();h.resume()};this.h=function(){return g};this.Jc=function(){f=k;d.ga()};this.Kc=function(){f=o;d.fa()};this.f=function(){return f}},start:function(){if(this.Sa)throw{name:"MW.MinigameModuleAlreadyStarted",message:"This minigame module ("+this.e+") has already been started."};
for(this.Sa=k;0<this.na.length;)this.na.shift()()},stop:function(){if(this.Ta)throw{name:"MW.MinigameModuleAlreadyStopped",message:"This minigame module ("+this.e+") has already been stopped."};for(this.Ta=k;0<this.oa.length;)this.oa.shift()()},qa:function(a){return this.u.qa(a)},fa:function(){return this.u.fa()},ga:function(){return this.u.ga()},ba:function(){return this.u.ba()},aa:function(){return this.u.aa()},N:function(){return this.u.N()},A:function(){return this.u.A()},b:function(){return this.u.b()}}).extend({init:function(a){function b(a){q=
k;c.b()&&!c.h()?c.k(ea,a):a()}function d(){m=E.q(h,g);w+=1;E.sa(c.Q(da),function(){c.a(fa);c.a(B,{},k);c.b()||c.a(C,{},k)})()}function e(){var a=3<=j,b=1<=u;3===u||a&&b?c.k(ga,c.Yc):d()}this._super(a,"Ladder");var c=this,h=1,g=6,f=[],m=E.q(h,g),n=l,j=0,u=0,r=o,q=o,w=0,v=0,F=0;c.p(function(){var a,b=0;for(a=h;a<=g;a+=1)f[b]=a,b+=1});this.Ba=function(){u+=1;c.N()?(c.k("MG_LADDER_CONFIRM_TARGET"),c.k("MG_LADDER_GET_TREAT",e)):(c.a("MG_LADDER_CONFIRM_TARGET"),c.qa(e))};this.r=function(a){n=a;j+=1;E.sa(b,
c.Q("MG_LADDER_PICKED",{Oe:a,xe:a===m}),c.pb("MG_LADDER_IGNORE_INPUT"),function(b){F=c.f()?F+1:0;c.f()&&a===m&&c.Kc();b()},function(b){a===m&&(a<v&&(c.h()||c.f()))&&c.a("Ladder.betterBecauseSmaller");a===m&&(a>v&&(c.h()||c.f()))&&c.a("Ladder.betterBecauseBigger");a!==m&&(c.h()||c.f())&&c.a("Ladder.hmm");c.b()&&(v=a);if(c.b()&&!c.f()||c.f()&&a===m)c.Zc(),c.a("MG_LADDER_FORBID_GAMER_INPUT",{},k);b()},c.Q("MG_LADDER_HELPER_APPROACH_TARGET"),function(b){q=o;c.b()&&c.a("MG_LADDER_FORBID_INTERRUPT");a===
m?(r=k,E.sa(c.Q("MG_LADDER_GET_TARGET"),c.Q("MG_LADDER_RESET_SCENE"),c.pb("MG_LADDER_HAS_TARGET"),function(){c.Va("correct");r=o;b()})()):c.k("MG_LADDER_RESET_SCENE",function(){c.a(B,{},k);c.b()||c.a(C);c.Ea();c.a("Ladder.incorrect");4<=F&&c.a("Ladder.agentSuggestSolution");c.Va("incorrect");b()});a<m&&(c.b()&&!c.h()&&!c.f())&&c.a("Ladder.agentTooLow");a>m&&(c.b()&&!c.h()&&!c.f())&&c.a("Ladder.agentTooHigh");a<m&&(c.A()||c.h()||c.f())&&c.a("Ladder.tooLow");a>m&&(c.A()||c.h()||c.f())&&c.a("Ladder.tooHigh");
n=l})()};this.M=function(){return m};this.gb=function(){var a=E.q(0,f.length-1);return f[a]===m?this.gb():f[a]};this.m=function(){if(n===l)throw{name:"No number chosen yet",L:"Ladder",message:"A chosen number was asked for in the Ladder Game, but no number has yet been chosen by the user or the agent."};return n};this.Fe=t(3);this.X=function(){if(0===w)throw"MinigameNotStartedException";return w};this.ua=function(){return f};this.nc(function(){q&&c.b()&&(q=o,c.b()&&c.a("MG_LADDER_FORBID_INTERRUPT"),
c.Ca(),j-=1,r||(c.a(C,{},k),c.a("MG_LADDER_INTERRUPT",{}),c.k("MG_LADDER_RESET_SCENE",function(){c.a(B,{},k)})))});this.oc(function(){c.a("MG_LADDER_IGNORE_INPUT",{},k);c.a("MG_LADDER_FORBID_GAMER_INPUT",{},k);c.b()?c.k("MG_LADDER_START_AGENT",d):d()});this.pc(function(){c.a("Game.roundDone")})}});function Ob(){var a=[];this.v=function(b){E.ya(a,b)||a.push(b);return Tween.get(b)};this.removeTweens=function(a){Tween.removeTweens(a)};this.Ia=function(){for(var b=0;b<a.length;b++)Tween.removeTweens(a[b])}}var X=oa.extend({init:function(a,b){this._super(b);this.kc=a;this.pa=new Ob},j:function(){this._super();this.pa.Ia()},n:function(){this._super()},v:function(a){return this.pa.v(a)},nb:function(a){this.pa.removeTweens(a)},getStage:s("kc")});var W=Class.extend({init:function(a,b){function d(){e.blink.show();setTimeout(function(){e.blink.setAnimation("blink");e.blink.afterFrame(e.cb.blink.length-1,function(){e.blink.setAnimation("idle");d()})},E.q(2E3,5E3))}this.container=a;this.rb=o;this.group=new Kinetic.Group(b);this.container.add(this.group);this.i=new Kinetic.Sprite({image:this.Mc,animation:"idle",animations:this.animations,frameRate:4,visible:o});this.face=new Kinetic.Sprite({image:this.xc,animation:"neutral",animations:this.yc,
frameRate:4,x:this.w.face.x,y:this.w.face.y,visible:o});this.blink=new Kinetic.Sprite({image:this.rc,animation:"idle",animations:this.cb,frameRate:15,x:this.w.face.x,y:this.w.face.y,visible:o});this.c=new Kinetic.Sprite({image:this.Wc,animation:"pointAt",animations:this.da,frameRate:5,visible:o,x:this.w.arm.x,y:this.w.arm.y});var e=this;d();this.group.add(this.i);this.group.add(this.c);this.group.add(this.face);this.group.add(this.blink);this.start=function(){e.rb||(e.rb=k,this.i.show(),this.i.start(),
this.face.start(),this.blink.start(),this.blink.show())};this.Ga=function(){this.i.setPosition({x:0,y:0})}},xa:function(){this.start();this.face.show();this.blink.show();this.i.setAnimation("idle");this.Ga()},J:function(){this.start();this.face.hide();this.blink.hide();this.i.setAnimation("dance");this.i.setPosition(this.w.dance)},ca:function(a,b){this.start();this.i.setAnimation("idle-no-arm");this.c.show();this.c.setAnimation("pointAt"+a);var d=this;this.hc=a;this.c.afterFrame(d.da["pointAt"+a].length-
2,function(){d.c.stop();b()});this.c.start()},ob:function(a){this.start();this.c.stop();this.i.setAnimation("idle-no-arm");this.c.show();var b=this;if(4>this.c.getIndex()){var d=this.c.getIndex();this.c.setIndex(this.da["pointAt"+this.hc].length-d-2)}this.c.setAnimation("reset");this.c.afterFrame(this.da.reset.length-1,function(){b.c.stop();b.c.hide();b.i.setAnimation("idle");a!==i&&a()});this.c.start()},Oc:function(){this.start();this.face.hide();this.blink.hide();this.i.setAnimation("jump");this.Ga()},
wa:function(){this.start();this.face.show();this.blink.show();this.i.setAnimation("head");this.Ga()},ed:function(){this.start();this.face.show();this.blink.show();this.face.setAnimation("talk")},Sc:function(){this.start();this.face.show();this.blink.show();this.face.setAnimation("neutral")},fb:function(){return this.w.feet},transitionTo:function(a){this.group.transitionTo(a)},Te:function(a){this.group.moveTo(a)},setX:function(a){this.group.setX(a)},setY:function(a){this.group.setY(a)},setPosition:function(a){this.group.setPosition(a)}}).extend({init:function(a,
b){this.Mc=G.Eb;this.xc=G.Cb;this.rc=G.Bb;this.Wc=G.Db;this.animations={idle:[{x:311,y:0,width:249,height:338}],"idle-no-arm":[{x:0,y:1675,width:249,height:338}],dance:[{x:0,y:0,width:249,height:404},{x:0,y:454,width:249,height:403},{x:0,y:907,width:249,height:404}],head:[{x:300,y:473,width:249,height:266}],jump:[{x:0,y:1361,width:261,height:264}]};this.yc={happy:[{x:0,y:0,width:220,height:150}],neutral:[{x:0,y:200,width:220,height:150}],surprised:[{x:0,y:400,width:220,height:150}],talk:[{x:0,y:600,
width:201,height:129},{x:0,y:200,width:220,height:150}]};this.cb={idle:[{x:0,y:0,width:1,height:1}],blink:[{x:0,y:0,width:176,height:85},{x:0,y:135,width:177,height:91},{x:0,y:276,width:178,height:98}]};this.da={pointAt6:[{x:0,y:0,width:320,height:430},{x:0,y:480,width:320,height:430},{x:0,y:960,width:320,height:430},{x:0,y:1440,width:320,height:430},{x:0,y:1920,width:320,height:430}],pointAt5:[{x:0,y:0,width:320,height:430},{x:0,y:480,width:320,height:430},{x:0,y:960,width:320,height:430},{x:0,y:1440,
width:320,height:430},{x:370,y:0,width:320,height:430}],pointAt4:[{x:0,y:0,width:320,height:430},{x:0,y:480,width:320,height:430},{x:0,y:960,width:320,height:430},{x:0,y:1440,width:320,height:430},{x:370,y:480,width:320,height:430}],pointAt3:[{x:0,y:0,width:320,height:430},{x:0,y:480,width:320,height:430},{x:0,y:960,width:320,height:430},{x:0,y:1440,width:320,height:430},{x:370,y:960,width:320,height:430}],pointAt2:[{x:0,y:0,width:320,height:430},{x:0,y:480,width:320,height:430},{x:0,y:960,width:320,
height:430},{x:0,y:1440,width:320,height:430},{x:370,y:1440,width:320,height:430}],pointAt1:[{x:0,y:0,width:320,height:430},{x:0,y:480,width:320,height:430},{x:0,y:960,width:320,height:430},{x:0,y:1440,width:320,height:430},{x:370,y:1920,width:320,height:430}],reset:[{x:0,y:1440,width:320,height:430},{x:0,y:960,width:320,height:430},{x:0,y:480,width:320,height:430},{x:0,y:0,width:320,height:430}]};this.w={dance:{x:0,y:-64},face:{x:-12,y:-11},feet:{x:0,y:-315},arm:{x:-216,y:-196}};this._super(a,b)}});var Jb=X.extend({init:function(a,b){this._super(a,"AgentChooserView");this.Qa=b;var d=this;this.d=l;this.La={ka:{cc:363,dc:150,t:2},g:{t:250,H:250,Ma:60}};this.ma=function(){var a=[];this.add=function(b){a.push(b)};this.ze=function(){for(var b=0;b<a.length;b++)a[b].attrs.listening=k};this.wc=function(){for(var b=0;b<a.length;b++)a[b].attrs.listening=o};this.sc=function(b,h){for(var g=0;g<a.length;g++)a[g]===b?d.setTimeout(function(){b.transitionTo({x:d.getStage().getWidth()/2,y:d.getStage().getHeight()/
2,scale:{x:1.5,y:1.5},duration:1,callback:function(){P.play(Ba);d.setTimeout(h,5E3)}})},1E3):a[g].transitionTo({opacity:0,duration:1})};return this}();this.fc=function(a,b,h,g){var f=new Kinetic.Group({x:b,y:h}),b=d.La,b=new Kinetic.Rect({width:b.g.t,height:b.g.H,fill:{start:{x:b.g.t/2,y:b.g.H/2,radius:0},end:{x:b.g.t/2,y:b.g.H/2,radius:0.75*b.g.t},colorStops:[0,"#00FF7F",1,"#556B2F"]},shadow:{color:"black",blur:15,offset:[15,15],opacity:0.5},opacity:0.6,cornerRadius:10,strokeWidth:4,stroke:"white",
offset:{x:b.g.t/2,y:b.g.H/2}});f.add(b);f.C=b;f.gc=a;g.add(f);(new a.view(f,{x:-110,y:-60,scale:0.9})).wa();f.on("mousedown touchstart",function(){P.play(ya);f.C.setFill("white");f.moveToTop();d.ma.sc(f,function(){d.Qa.vc(f.gc)});d.ma.wc()});return f}},n:function(){this._super();this.d=new Kinetic.Layer;this.getStage().add(this.d);var a=new Kinetic.Image({image:G.Sb});this.d.add(a);for(var a=this.La,a=E.Y(a.ka.cc,a.ka.dc,a.g.t+a.g.Ma,a.g.H+a.g.Ma,a.ka.t),b=this.Qa.Na,d=0;d<b.length;d++){var e=a.next(),
e=new this.fc(b[d],e.x,e.y,this.d);this.ma.add(e)}P.play(Aa);this.d.draw()},j:function(){this._super();this.getStage().remove(this.d)}});var Ab=X.extend({init:function(a){this._super(a,"GardenView");var b=this,d,e,c,h,g,f;b.p(function(){d=new Kinetic.Image({image:G.Rb});e=new Kinetic.Image({image:G.Qb});h=new Kinetic.Group({x:300,y:300,visible:o});g=new Kinetic.Image({image:G.o,offset:{x:G.o.width/2,y:G.o.height/2}});f=new Kinetic.Polygon({points:[{x:40,y:0},{x:60,y:0},{x:80,y:40},{x:41,y:63},{x:15,y:17}],offset:{x:G.o.width/2,y:G.o.height/2},fill:"blue"});c=new Kinetic.Layer;a.add(c);c.add(d);c.add(h);h.add(f);h.add(g)});b.z(function(){a.remove(c)});
b.on("frame",function(){c.draw()});b.on("Game.demonstrateGarden",function(a){P.play(Qa);e.setOpacity(0);c.add(d);c.add(e);var f=new Kinetic.Group({x:10,y:10}),g=new Kinetic.Rect({width:100,height:30,fill:"gray"}),h=new Kinetic.Text({text:"Skip",width:100,height:30,y:10,align:"center",fontFamily:"Arial",textFill:"black"});f.add(g);f.add(h);f.on("mousedown touchstart",function(){a.callback()});c.add(f);b.setTimeout(function(){P.play(Ra);d.transitionTo({opacity:0,duration:2});e.transitionTo({opacity:1,
duration:2,callback:function(){b.setTimeout(function(){a.callback()},2E3)}})},3E3)});b.on("Game.waterGarden",function(a){var c=f.attrs.points,d=(c[0].y-c[4].y)/(c[0].x-c[4].x),e=(c[2].y-c[1].y)/(c[2].x-c[1].x),r=c[0].y+17,q=c[0].y-d*c[0].x,w=c[2].y-e*c[2].x;g.setRotation(Math.PI/3);h.show();setTimeout(function(){b.v(f.attrs.points[0]).to({x:(r-q)/d,y:r},3E3);b.v(f.attrs.points[1]).to({x:(r-w)/e,y:r},3E3).call(function(){var d=(c[3].y-c[4].y)/(c[3].x-c[4].x),g=c[3].y-d*c[3].x;r+=c[3].y-c[2].y;b.v(f.attrs.points[0]).to({x:(r-
g)/d,y:r},3E3);b.v(f.attrs.points[1]).to({x:(r-w)/e,y:r},3E3).call(function(){r+=c[3].y-c[2].y;b.v(f.attrs.points[0]).to({x:(r-g)/d,y:r},2E3);b.v(f.attrs.points[1]).to({x:(r-g)/d,y:r},2E3).call(function(){b.setTimeout(function(){a.callback()},3E3)})})})},2E3)})}});var Kb=X.extend({init:function(a,b){this._super(a,"IntroductionView");this.Pa=b;this.d=new Kinetic.Layer},n:function(){var a=this;this._super();this.getStage().add(this.d);(new W(this.d,{x:100,y:200,scale:0.7})).J();(new W(this.d,{x:300,y:200,scale:0.7})).J();(new W(this.d,{x:500,y:200,scale:0.7})).J();(new W(this.d,{x:700,y:200,scale:0.7})).J();var b=new Kinetic.Group({x:10,y:10}),d=new Kinetic.Rect({width:100,height:30,fill:"gray"}),e=new Kinetic.Text({text:"Skip",width:100,height:30,y:10,align:"center",
fontFamily:"Arial",textFill:"black"});b.add(d);b.add(e);b.on("mousedown touchstart",function(){a.Pa(k)});this.d.add(b);this.d.draw();this.setTimeout(function(){P.play(La)},2E3);this.setTimeout(function(){P.play(Ma)},2E3);this.setTimeout(function(){P.play(Na)},7E3);this.setTimeout(function(){P.play(Oa)},7E3);this.setTimeout(function(){P.play(Pa)},12E3);this.setTimeout(function(){a.Pa(o)},14E3)},j:function(){this._super();this.getStage().remove(this.d)}});var Bb=X.extend({init:function(a,b){this._super(a,"MinigameHandlerView");var d=a.ta(),e=new Kinetic.Text({text:"Backend Score (current minigame):",fontSize:12,fontFamily:"sans-serif",textFill:"black",align:"left",verticalAlign:"middle",x:a.getWidth()-700,y:35}),c=o,h=o;this.on("backendScoreGameUpdateMiniGame",function(a){e.setText("Backend Score (current minigame): "+a.$c)});this.p(function(){h=c=k;d.add(e)});this.on("TRIGGER_SCORE",function(){h&&!c?(d.add(e),c=k,console.info("Turning off backend score display")):
h&&c&&(d.remove(e),c=o,console.info("Turning on backend score display"))});this.z(function(){h=o;c&&d.remove(e);c=o});var g=new Kinetic.Text({text:"Learning track (current game):",fontSize:12,fontFamily:"sans-serif",textFill:"black",align:"left",verticalAlign:"middle",x:a.getWidth()-700,y:55}),f=o,m=o;this.p(function(){d.add(g);f=m=k});this.on("learningTrackUpdate",function(a){g.setText("Learning track (current game): "+a.Pc.name())});this.on("TRIGGER_SCORE",function(){m&&!f?(d.add(g),f=k):m&&f&&
(d.remove(g),f=o)});this.z(function(){m=o;f&&d.remove(g);f=o});var n=this,j,u,r,q,w=10,v=20;n.p(function(){j=new Kinetic.Image({image:G.o,x:d.getStage().getWidth()-G.o.width-20,y:20,width:G.o.width,height:G.o.height,visible:o});u=new Kinetic.Image({image:G.T,offset:{x:G.T.width/2,y:0},width:G.T.width,height:G.T.height,visible:o,rotation:Math.PI});r=new Kinetic.Image({image:G.la,x:j.getX(),y:j.getY(),width:G.la.width,height:G.la.height,visible:o});q=new Kinetic.Rect({fill:"#379de4",x:j.getX()+20,y:j.getY()+
j.getHeight()-4,width:54,height:0});d.add(r);d.add(q);d.add(u);d.add(j)});n.z(function(){d.remove(u);d.remove(j);d.remove(r);d.remove(q)});n.p(function(){j.show();var a=b.Ic();0<a&&r.show();q.setHeight(q.getHeight()-6.9*a)});n.on("resetPitcherLevel",function(){r.hide();q.setHeight(0)});n.on("setPitcherLevelSetDropOrigin",function(a){w=a.x;v=a.y});n.on("setPitcherLevel",function(a){var c=j.getX()+j.getWidth()/2,d=j.getY()+j.getHeight()-u.getHeight(),e=1E3*(Math.sqrt(Math.pow(w-c,2)+Math.pow(v-d,2))/
200);u.setX(w);u.setY(v);u.setOpacity(1);u.show();b.A()?P.play(Ha):b.b()&&(P.play(Fa),P.play(Ga),n.setTimeout(function(){P.play(Ia)},2E3));u.transitionTo({x:c-50,y:d,duration:1.2*e/1E3,callback:function(){u.transitionTo({rotation:4*Math.PI/3,x:c-50,y:d-30,duration:0.3,callback:function(){u.transitionTo({rotation:5*Math.PI/3,x:c-25,y:d-25,duration:0.3,callback:function(){u.transitionTo({rotation:6*Math.PI/3,x:c,y:d,duration:0.3,callback:function(){P.play(Ka);r.show();q.transitionTo({height:q.getHeight()-
6.9,duration:1});u.transitionTo({opacity:0,duration:1,callback:function(){n.setTimeout(function(){u.hide();u.setRotation(Math.PI);a.callback!=i&&a.callback()},1E3)}})}})}})}})}})})}});var Ib=X.extend({init:function(a){this._super(a,"MonkeyWorldView");var b=a.ta(),d=[];this.on("Game.showMiniGameChooser",function(a){var c=a.callback,e=a.Ac,h=E.Y(200,200,300,100,2),j;for(j in e)(function(){for(var a=0;a<e[j].dd;a++)(function(){var g=e[j].zb[a],q=h.next(),q=new Kinetic.Group(q),w=new Kinetic.Rect({width:280,height:100,stroke:"black",strokeWidth:4}),v=new Kinetic.Text({text:g.title,fontSize:20,fontFamily:"sans-serif",textFill:"black",align:"center",verticalAlign:"center",width:280,
height:100,y:40});v.setAlign("center");q.add(w);q.add(v);q.on("mousedown touchstart",function(){w.setFill("yellow");c(g)});d.push(q);b.add(q)})()})()});this.on("Game.hideMiniGameChooser",function(){for(var a=0;a<d.length;a++)b.remove(d[a]);d=[]});var e=new Kinetic.Rect({x:a.getWidth()/2,y:a.getHeight()/2,width:320,height:50,cornerRadius:10,offset:{x:160,y:25},fill:"#333",opacity:0}),c=new Kinetic.Rect({x:a.getWidth()/2,y:a.getHeight()/2,width:0,height:30,offset:{x:150,y:15},fill:"#FFCC00"}),h=new Kinetic.Text({fontFamily:"Arial",
fontSize:10,textFill:"black",fontStyle:"bold",Xe:"black",text:"Monkey World Demo",align:"center",width:a.getWidth(),height:50,y:a.getHeight()/2-50,x:0});this.on("Game.showLoadingScreen",function(a){b.add(e);b.add(c);b.add(h);e.transitionTo({opacity:1,duration:a.time/1E3})});this.on("Game.loadingSounds",function(){h.setText(N.get("INIT_LOADING_SOUNDS"));b.draw()});this.on("Game.loadingImages",function(){h.setText(N.get("INIT_LOADING_IMAGES"));b.draw()});this.on("Game.loadingDone",function(){b.remove(h);
b.remove(e);b.remove(c);b.draw()});this.on("Game.updateSoundLoading",function(a){c.setWidth(300*a.progress);b.draw()});this.on("Game.updateImageLoading",function(a){c.setWidth(300*a.progress);b.draw()})}});Kinetic.s.Vb=function(){var a={x:750,y:600,opacity:0},b=o;a.image=G.Gb;a.width=208;a.height=208;a.offset={x:104,y:104};a.animations={shake:[{x:0,y:0,width:208,height:208},{x:0,y:258,width:208,height:208},{x:0,y:516,width:208,height:208},{x:0,y:258,width:208,height:208},{x:0,y:0,width:208,height:208},{x:0,y:1032,width:208,height:208},{x:0,y:1290,width:208,height:208},{x:0,y:1032,width:208,height:208},{x:0,y:0,width:208,height:208},{x:0,y:258,width:208,height:208},{x:0,y:516,width:208,height:208},{x:0,
y:258,width:208,height:208},{x:0,y:0,width:208,height:208},{x:0,y:1032,width:208,height:208},{x:0,y:1290,width:208,height:208},{x:0,y:1032,width:208,height:208}],idle:[{x:0,y:0,width:208,height:208}]};a.animation="idle";a.frameRate=10;var d=new Kinetic.Sprite(a);this.animate=function(){b||(d.start(),b=k);d.setAnimation("shake");d.afterFrame(a.animations.shake.length-1,function(){d.setAnimation("idle")})};d.animate=this.animate;return d};Kinetic.s.ec=function(){var a={x:900,y:600,opacity:0},b=o;a.image=G.Ib;a.width=224;a.height=224;a.offset={x:112,y:112};a.animations={shake:[{x:0,y:0,width:224,height:224},{x:0,y:274,width:224,height:224},{x:0,y:548,width:224,height:224},{x:0,y:274,width:224,height:224},{x:0,y:0,width:224,height:224},{x:0,y:274,width:224,height:224},{x:0,y:548,width:224,height:224},{x:0,y:274,width:224,height:224}],idle:[{x:0,y:0,width:224,height:224}]};a.animation="idle";a.frameRate=10;var d=new Kinetic.Sprite(a);
this.animate=function(){b||(d.start(),b=k);d.setAnimation("shake");d.afterFrame(a.animations.shake.length-1,function(){d.setAnimation("idle")})};d.animate=this.animate;return d};Kinetic.s.Tb=function(a){var a=new Kinetic.Group(a),b,d,e={},c={};e.idle=[{x:0,y:0,width:181,height:309}];e.walking=[{x:0,y:718,width:181,height:309},{x:0,y:359,width:181,height:309}];e.openMouth=[{x:0,y:1077,width:181,height:309},{x:0,y:1436,width:181,height:309},{x:0,y:1795,width:181,height:309},{x:231,y:0,width:181,height:309}];e.closeMouth=[{x:231,y:0,width:181,height:309},{x:0,y:1795,width:181,height:309},{x:0,y:1436,width:181,height:309},{x:0,y:1077,width:181,height:309}];e.keepMouthOpen=[{x:231,
y:0,width:181,height:309}];c.idleIn=[{x:0,y:0,width:500,height:500}];c.out=[{x:0,y:0,width:500,height:500},{x:0,y:550,width:500,height:500},{x:0,y:1100,width:500,height:500},{x:0,y:1650,width:500,height:500},{x:550,y:0,width:500,height:500}];c["in"]=[{x:550,y:0,width:500,height:500},{x:0,y:1650,width:500,height:500},{x:0,y:1100,width:500,height:500},{x:0,y:550,width:500,height:500},{x:0,y:0,width:500,height:500}];c.idleOut=[{x:550,y:0,width:500,height:500}];b=new Kinetic.Sprite({image:G.$b,animations:e,
animation:"idle",frameRate:5});d=new Kinetic.Sprite({image:G.ac,animations:c,animation:"idleIn",frameRate:10,visible:o,x:109,y:81,offset:{x:279,y:281}});a.add(d);a.add(b);this.ia=function(){b.setAnimation("walking")};this.O=function(){b.setAnimation("idle")};a.ia=this.ia;a.O=this.O;this.Ka=function(a){b.setAnimation("openMouth");b.afterFrame(e.openMouth.length-1,function(){b.setAnimation("keepMouthOpen");d.setAnimation("out");d.show();d.afterFrame(c.out.length-1,function(){d.setAnimation("idleOut");
a()})})};this.Ja=function(a){d.setAnimation("in");d.afterFrame(c["in"].length-1,function(){d.setAnimation("idleIn");d.hide();b.setAnimation("closeMouth");b.afterFrame(e.closeMouth.length-1,function(){b.setAnimation("idle");a()})})};this.start=function(){b.start();d.start()};a.Ja=this.Ja;a.Ka=this.Ka;a.start=this.start;return a};Kinetic.s.Zb=function(a){var b;b=new Kinetic.Group(a);switch(a.type){case 1:a=G.Wb;break;case 2:a=G.Xb;break;case 3:a=G.Yb;break;default:throw"NoSuchParcelTypeException";}a=new Kinetic.Image({image:a,width:a.width,height:a.height,scale:0.6+0.4*Math.random(),offset:{x:a.width/2,y:a.height/2}});b.add(a);b.bd=function(){function a(f,m){b.transitionTo({x:e+f*h,y:c+f*h,duration:g,callback:function(){if(0<m){var h=m-=1;a(-f,h)}else b.transitionTo({x:e,y:c,duration:g})}})}var e=b.getX(),c=b.getY(),h=4,g=
0.1;a(1,9)};b.Vc=function(a){b.on("mousedown touchstart",a)};b.Uc=function(){b.off("mousedown touchstart")};b.open=p();return b};var Pb=X.extend({init:function(a,b,d,e){this._super(b,e);var c=b.ta(),h=new Kinetic.Text({text:"Backend Score (current mode):",fontSize:12,fontFamily:"sans-serif",textFill:"black",align:"left",verticalAlign:"middle",x:b.getWidth()-700,y:15});c.add(h);var g=k,f=g;this.on("backendScoreUpdateMode",function(a){h.setText("Backend Score (current mode): "+a.$a)});this.on("TRIGGER_SCORE",function(){f&&!g?(c.add(h),g=k):f&&g&&(c.remove(h),g=o)});this.z(function(){g&&c.remove(h);g=f=o});var m=this;m.p(function(){if(a.N()){var e=
new d(c,{x:b.getWidth()-260,y:12,scale:0.5});e.wa();m.on("INTRODUCE_MODE",function(a){P.play(Sa);setTimeout(a,2E3)})}else if(a.A())e=new d(c,{x:b.getWidth()-260,y:12,scale:0.5}),e.wa(),m.on("INTRODUCE_MODE",function(a){P.play(Ta);m.setTimeout(function(){P.play(Ua);m.setTimeout(function(){e.transitionTo({opacity:0,duration:2});a()},3E3)},2E3)});else if(a.b())m.on("INTRODUCE_MODE",function(a){a()})});this.Ae=function(){throw{name:"AgentBodyNotInitiatedYet",message:"The body view of the agent has not yet been initated"};
};this.Ve=p()}}).extend({init:function(a,b,d,e){this._super(a,b,d,e);this.tb(e);var c=this,h=l,g=l,f=l,m,n,j=l,u=0.8;this.Xa=function(a){h=new Kinetic.s.Vb;g=new Kinetic.s.ec;h.setScale(0.4);g.setScale(0.4);a.add(h);a.add(g)};this.Wa=function(a,b,c){m=a;n=b;j=c;u=0.8};this.ca=function(b,d){f.ca(a.m(),function(){c.setTimeout(function(){a.h()||(c.r(a.m(),d),c.setTimeout(function(){f.ob(p())},1E3))},3E3)})};this.on("MG_LADDER_INTERRUPT",function(){c.$();a.b()&&(f.ob(),P.play(Ja))});this.on(ea,function(b){h.on("mousedown touchstart",
function(){h.animate();P.play(wa);a.Nc()});g.on("mousedown touchstart",function(){g.animate();P.play(xa)});b()});this.on("MG_LADDER_FORBID_INTERRUPT",function(){h.off("mousedown touchstart");g.off("mousedown touchstart")});this.on("MG_LADDER_START_AGENT",function(a){P.play(Xa);c.setTimeout(function(){a();h.transitionTo({opacity:1,duration:1});g.transitionTo({opacity:1,duration:1})},2E3)});this.on(ga,function(b){P.play(va);a.N()?c.setTimeout(b,4E3):(f.J(),c.setTimeout(function(){f.xa();c.setTimeout(b,
1500)},3E3))});this.on("INTRODUCE_AGENT",function(e){a.A()?(f=new d(j,{x:b.getWidth()-260,y:12,opacity:0,scale:u}),c.Z!==i&&c.Z(),g.moveToTop(),h.moveToTop(),f.Oc(),f.transitionTo({opacity:1,duration:1,callback:function(){f.transitionTo({x:m,y:n+f.fb().y,duration:1,callback:function(){f.xa();f.ed();P.play(Va);c.setTimeout(function(){P.play(Wa);c.setTimeout(function(){f.Sc();e()},1500)},2E3)}})}})):e()});this.on("INTRODUCE_MODE",function(){a.b()&&(f=new d(j,{x:m,y:n,scale:u}),c.Z!==i&&c.Z(),g.moveToTop(),
h.moveToTop(),f.setY(n+f.fb().y),f.xa())});this.on("MG_LADDER_GET_TREAT",function(a){c.hb(a)});this.on("MG_LADDER_CONFIRM_TARGET",function(){c.eb()});this.on("Ladder.betterBecauseBigger",function(){P.play(c.ab)});this.on("Ladder.betterBecauseSmaller",function(){P.play(c.bb)});this.on("Ladder.hmm",function(){P.play(Ea)});this.on("Ladder.agentSuggestSolution",function(){c.setTimeout(function(){P.play(c.Ha);c.setTimeout(function(){P.play(c.Ha)},2E3)},2E3)});this.on("Ladder.tooLow",function(){P.play(c.wb);
setTimeout(function(){P.play(c.xb)},2E3)});this.on("Ladder.tooHigh",function(){P.play(c.vb);setTimeout(function(){P.play(c.yb)},2E3)});this.on("Ladder.agentTooLow",function(){P.play(c.Za)});this.on("Ladder.agentTooHigh",function(){P.play(c.Ya)})}});var Qb=Pb.extend({init:function(a,b,d){this._super(a,b,d,"MtView");var e=this;e.wb=lb;e.vb=kb;e.xb=nb;e.yb=mb;e.Ha=ob;e.cd=pb;e.Za=sb;e.Ya=tb;e.ab=qb;e.bb=rb;e.qc=ub;var c=o,h=l,g=o,f=new Kinetic.Layer,m=[],n=new Kinetic.Group({x:400,y:600}),j=new Kinetic.Rect({width:50,height:50,fill:"blue",stroke:"black",strokeWidth:4,offset:{x:25,y:50}});Kinetic.Jb=function(a,b){var c=new Kinetic.Group({x:a,y:b}),d=new Kinetic.Circle({fill:"red",stroke:"black",strokeWidth:4,radius:20}),e=new Kinetic.Line({stroke:"black",
strokeWidth:4,points:[0,20,0,65]});c.add(e);c.add(d);return c};e.p(function(){b.add(f);var d=new Kinetic.Polygon({points:[50,600,350,600,150,100],fill:"gray",stroke:"black",strokeWidth:4});n.add(new Kinetic.Polygon({points:[0,0,100,0,110,-50,-10,-50],fill:"#993300",stroke:"black",strokeWidth:4}));for(var h=new E.Y(730,180,140,140,2),q=0;6>q;q++)(function(b){var d=h.next(),d=new Kinetic.Group({x:d.x,y:d.y}),e=new Kinetic.Group({x:40,y:40}),j=new Kinetic.Rect({width:140,height:140,fill:"yellow",strokeWidth:4,
stroke:"black"});d.add(j);m.push(d);for(var u=0,q=0;q<=b;q++)3===q&&u++,e.add(new Kinetic.Jb(30*q-81*u,30*u));d.add(e);d.C=j;d.Oa=e;d.on("mousedown touchstart",function(){c&&a.ba()?a.r(b+1):a.aa()&&!g&&(g=k,P.play(za),setTimeout(function(){P.play(Ca);setTimeout(function(){g=o},2E3)},2E3))});f.add(d)})(q);f.add(d);d=a.ua();for(q=0;q<d.length;q++){var w=new Kinetic.Line({points:[280-24*q,430-60*q,280-24*q+100,430-60*q],stroke:"black",strokeWidth:4});f.add(w)}j.hide();f.add(j);f.add(n);e.Xa(f);f.draw()});
e.$=function(){h!=l&&h();n.transitionTo({x:400,y:600,duration:0.5})};e.on(da,function(b){var c=a.M()-1;j.setX(280-24*c);j.setY(430-60*c);j.show();f.draw();b()});e.on("MG_LADDER_IGNORE_INPUT",function(){c=o});e.on(B,function(){c=k});e.on(C,p());e.on("MG_LADDER_FORBID_GAMER_INPUT",p());this.va=function(a){a=m[a-1];return{x:a.getX()+a.C.getWidth()/2,y:a.getY()+a.C.getHeight()/2}};e.Wa(b.getWidth()-500,b.getHeight()-50,f);this.r=function(a,b){c=o;var d=m[a-1].Oa,f=m[a-1];f.C.setFill("red");var g=f.Oa.getX(),
j=d.getY();h=function(){e.nb(d.attrs);d.setX(g);d.setY(j);d.moveTo(f);f.C.setFill("yellow")};d.transitionTo({x:-Math.abs(400-f.getX())+20,y:600-f.getY()+-110,duration:3,callback:function(){d.moveTo(n);d.setX(20);d.setY(-110);d.moveDown();b()}})};e.on("MG_LADDER_PICKED",function(b){a.b()&&!a.h()&&!a.f()?(e.va(a.m()),P.play(Da),e.setTimeout(function(){e.ca(a.m(),b)},1500)):e.r(a.m(),b)});e.on("MG_LADDER_HELPER_APPROACH_TARGET",function(b){var c=a.m();n.transitionTo({x:280-24*(c-1)+100,y:430-60*(c-1),
duration:1.5,callback:b})});e.on("MG_LADDER_GET_TARGET",function(a){P.play(vb);e.setTimeout(function(){P.play(wb)},2E3);j.transitionTo({x:n.getX()+50,y:n.getY()+-25,duration:0.7,callback:function(){n.transitionTo({x:400,y:600,duration:2});j.transitionTo({x:450,y:575,duration:2,callback:function(){j.transitionTo({x:550,y:600,duration:1.5,callback:a})}})}})});e.on("MG_LADDER_HAS_TARGET",function(){a.b()||a.Ba()});e.eb=p();e.hb=function(a){a()};e.on("MG_LADDER_RESET_SCENE",function(a){function b(){h!=
l&&h();a()}600!=n.getY()?n.transitionTo({x:400,y:600,duration:1.5,callback:b}):b()});this.z(function(){b.remove(f)})}});function Rb(a){a.x===i&&(a.x=0);a.y===i&&(a.y=0);a.min===i&&(a.min=1);a.max===i&&(a.max=6);a.step===i&&(a.step=1);a.width===i&&(a.width=2);a.Da===i&&(a.Da=p());a.G===i&&(a.G=10);a.ra===i&&(a.ra={x:0,y:0});a.ea===i&&(a.ea=1);for(var b=[],d=o,e=o,c={color:"black",blur:10,offset:[3,3],opacity:0.5},h=new E.Y(a.ra.x+(a.V+a.G),a.ra.y+(a.max/a.width-1)*(a.U+a.G),-(a.V+a.G),-(a.U+a.G),a.width),g=new Kinetic.Group({x:a.x,y:a.y}),f=a.min;f<=a.max;f+=a.step)(function(f){function n(b,c){c===i&&(c=o);if(!e)if(!c&&
d)a.zc(f);else if(c||!d){g.za();a.Da(f);u.attrs.image=a.tc;u.attrs.shadow=l}}var j=h.next(),j=new Kinetic.Group({x:j.x,y:j.y}),u=new Kinetic.Image({image:a.button,width:a.V,height:a.U,shadow:c}),r=new Kinetic.Image({image:a.Fa[f],scale:{x:a.ea,y:a.ea},offset:{x:a.Fa[f].width/2,y:a.Fa[f].height/2},x:a.V/2,y:a.U/2});j.on("mousedown touchstart",function(){n(0,o)});j.add(u);j.add(r);u.push=n;g.add(j);b[f]=u;b[f].ib=j})(f);g.mb=function(){for(var d=a.min;d<=a.max;d=d+a.step){b[d].attrs.image=a.button;
b[d].setShadow(c)}};g.za=function(){d=k};g.gd=function(){d=o};g.Lc=function(){e=k};g.mc=function(){e=o};g.Dc=function(a){return{x:g.getX()+b[a].ib.getX()+b[a].getWidth()/2,y:g.getY()+b[a].ib.getY()+b[a].getHeight()/2}};g.push=function(a){b[a].push(l,k)};return g};var Sb=Pb.extend({init:function(a,b,d){this._super(a,b,d,"TreeView");var e=this,c=1/2.083168317,h,g,f,m,n,j=[],u,r,q,w,v=l,F,y,x=0,I={},K,d=b.getHeight()-160,T=b.getHeight()-120,H={1:{x:100,y:40,rotation:-Math.PI/9},2:{x:100,y:100,rotation:Math.PI/11},3:{x:200,y:40,rotation:-Math.PI/12},4:{x:200,y:100,rotation:Math.PI/9}};e.wb=$a;e.vb=Za;e.xb=bb;e.yb=ab;e.Ha=cb;e.cd=db;e.Za=gb;e.Ya=hb;e.ab=eb;e.bb=fb;e.qc=ib;g=new Rb({x:575,y:180,button:G.ja,tc:G.Hb,V:G.ja.width,U:G.ja.height,G:15,zc:function(){P.play(za);
e.setTimeout(function(){P.play(Ca);e.setTimeout(p(),2E3)},2E3)},Da:function(b){a.ba()&&a.r(b)},Fa:{1:G.Kb,2:G.Lb,3:G.Mb,4:G.Nb,5:G.Ob,6:G.Pb},ea:0.75});g.za();r=new Kinetic.Layer;b.add(r);f=new Kinetic.s.Tb({x:244,y:580,scale:0.7*c});n=function(){m=e.setInterval(function(){j[a.X()-1].bd(e)},4E3)};w=function(){e.clearInterval(m)};y=function(){v.Vc(a.Ba)};e.on("setPitcherLevelBefore",function(){e.a("setPitcherLevelSetDropOrigin",{x:j[a.X()-1].getX(),y:j[a.X()-1].getY()})});e.on("MG_LADDER_IGNORE_INPUT",
function(){g.Lc()});e.on(B,function(){g.mc()});e.on(C,function(){g.gd()});e.on("MG_LADDER_FORBID_GAMER_INPUT",function(){g.za()});F=function(b){v=j[a.X()-1];e.setTimeout(function(){v.transitionTo({x:100,y:150,rotation:2*Math.PI,duration:1,callback:function(){v.setRotation(0);v.transitionTo({y:I[a.M()].getY()+25,rotation:2*Math.PI*(7-a.M()),duration:1,callback:function(){v.setRotation(0);b()}})}})},2E3)};e.eb=function(){v.Uc();w();v.open();g.mb();r.draw()};e.hb=function(a){var b=new Kinetic.Image({x:v.getX(),
y:v.getY(),image:G.Fb,width:128,height:128,offset:{x:64,y:64},scale:{x:0.1,y:0.1}});r.add(b);b.transitionTo({scale:{x:0.7,y:0.7},duration:0.5,callback:function(){b.transitionTo({x:b.getX()+50,y:200,duration:2,callback:a})}})};e.on(da,function(a){x+=1;F(a)});e.on("MG_LADDER_PICKED",function(b){a.b()&&!a.h()&&!a.f()?(e.va(a.m()),P.play(Da),e.setTimeout(function(){e.ca(a.m(),b)},1500)):e.r(a.m(),b)});e.on("MG_LADDER_HELPER_APPROACH_TARGET",function(b){q=a.m();f.transitionTo({y:480,duration:2,callback:function(){f.transitionTo({rotation:-Math.PI/
8,x:219,duration:1,callback:function(){1<q?f.transitionTo({rotation:0,y:430,duration:1,callback:function(){2<q?(f.ia(),f.transitionTo({y:I[q].getY(),duration:0.5*q,callback:function(){f.O();b()}})):(f.O(),b())}}):b()}})}})});e.on("MG_LADDER_RESET_SCENE",function(b){var c=0;q!==a.M()&&(c=2E3);e.setTimeout(function(){function a(){f.transitionTo({rotation:0,x:244,y:580,duration:2,callback:function(){g.mb();b()}})}function c(a){f.transitionTo({rotation:-Math.PI/16,x:244,y:510,duration:1,callback:function(){f.transitionTo({rotation:0,
y:530,duration:1,callback:a})}})}2<q?(f.ia(),f.transitionTo({y:430,duration:0.5*q,callback:function(){f.O();c(a)}})):1<q?c(a):a()},c)});e.on("MG_LADDER_GET_TARGET",function(b){f.Ka(function(){function c(){d+=1;2===d&&b()}var d=0;v.transitionTo({x:v.getX()+55,y:v.getY()-40,duration:0.01,callback:function(){e.setTimeout(function(){P.play(jb);f.Ja(c);v.transitionTo({x:650+75*x,y:T,rotation:3*Math.PI,duration:2,callback:function(){v.setRotation(0);c();a.b()||(y(),n())}})},200)}})})});e.z(function(){b.remove(r)});
e.$=function(){e.nb(f.attrs)};u=new Kinetic.Image({image:G.R,x:0,y:b.getHeight()-G.R.height,width:G.R.width,height:G.R.height});r.add(u);r.add(new Kinetic.Image({image:G.bc,x:145,y:161}));for(h=0;h<a.ua().length;h+=1)u=a.ua()[h],K=new Kinetic.Group({x:120,y:d-70*h}),I[u]=K;r.add(f);f.start();r.add(new Kinetic.Image({image:G.S,width:G.S.width,height:G.S.height,x:182,y:b.getHeight()-G.S.height}));this.r=function(b,c){P.play(ya);a.aa()&&g.push(b);c()};this.va=function(a){return g.Dc(a)};r.add(new Kinetic.Image({x:395,
y:-100,image:G.Ub}));r.add(g);e.Wa(b.getWidth()-248,b.getHeight()-50,r);e.Z=function(){for(h=0;3>h;h+=1)j[h].moveToTop()};e.p(function(){e.Xa(r);var a;for(h=0;3>h;h+=1)a=new Kinetic.s.Zb({x:H[h+1].x,y:H[h+1].y,rotation:H[h+1].rotation,type:h%3+1,scale:c}),r.add(a),j.push(a)});r.draw()}});var Cb,Tb={zd:{pe:{L:Nb,view:Sb,title:"Tree Game"},ie:{L:Nb,view:Qb,title:"Mountain Game"}}},Ub;for(Ub in Tb){var Vb=0,Y=Tb[Ub],Wb=[],Xb;for(Xb in Y)Wb.push(Y[Xb]),Y[Xb].uc=Y,Vb++;Y.zb=Wb;Y.dd=Vb}Cb=Tb;window.onload=function(){new Yb};WebFontConfig={google:{families:["Nunito::latin","Doppio+One::latin","Nobile:400,700:latin","Galindo::latin"]}};var Zb=document.createElement("script");Zb.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js";Zb.type="text/javascript";Zb.async="true";var $b=document.getElementsByTagName("script")[0];$b.parentNode.insertBefore(Zb,$b);
function Yb(){console.log("Running game engine starter");console.log("Creating KineticJS stage");var a=new Kinetic.Stage({container:"container",width:1010,height:660});console.log("Creating basic KineticJS layers");var b=new Kinetic.Layer;a.add(b);var d=new Kinetic.Layer;a.add(d);var e=new Kinetic.Layer;a.add(e);a.lc=d;a.ta=function(){return d};a.De=function(){return b};a.Ie=function(){return e};a.Pe=p();console.log("Setting up game engine");var c=new Lb(a,k,k),h=c.l,g=new Kinetic.Text({text:"",fontFamily:"Arial",
textFill:"black",textStroke:"white",textStrokeWidth:1,fontSize:18,x:0,y:0}),f=k;h.on("TRIGGER_FPS",function(){f?(console.info("Turning off FPS display"),d.remove(g),f=o):(console.info("Turning on FPS display"),d.add(g),f=k)},"game");d.add(g);(new Kinetic.Animation({func:function(b){h.a("frame",{frame:b});d.draw();a.jc&&(e.draw(),a.jc=o);Tween.tick(b.timeDiff,o)},node:d})).start();h.on("Game.miniGameListenersInitiated Game.viewInitiated",function(){d.moveToTop();e.moveToTop()},"game");console.log("Showing welcome screen");
h.a("Game.showLoadingScreen",{time:2E3});setTimeout(function(){h.a("Game.loadingSounds");var b=l,d=l;console.log("Downloading sound files");var e=new PreloadJS(o);e.onComplete=function(){clearInterval(b);d=setInterval(function(){h.a("Game.updateImageLoading",{progress:M.Gc()})},50);h.a("Game.loadingImages");M.Qc(function(){console.log("Downloading image files");clearInterval(d);h.a("Game.updateImageLoading",{progress:1});setTimeout(function(){h.a("Game.loadingDone");console.log("Starting game engine");
c.start()},1E3)})};e.installPlugin(SoundJS);b=setInterval(function(){h.a("Game.updateSoundLoading",{progress:e.progress})},50);P.ad(a);h.on("TRIGGER_SUBTITLES",function(){P.fd()},"game");e.loadManifest(P.Hc())},2E3)};